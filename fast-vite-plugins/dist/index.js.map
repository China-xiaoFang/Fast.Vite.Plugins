{"version":3,"sources":["../../src/buildSvgIcon/index.ts","../../src/cdnImport/index.ts","../../src/componentAutoImport/index.ts","../../src/routerPath/index.ts","../../src/versionUpdate/index.ts"],"sourcesContent":["import fs from \"fs\";\nimport path from \"path\";\nimport type { Plugin, ResolvedConfig } from \"vite\";\n\n/**\n * 查找 svg 文件\n */\n\nconst findSvgFile = (dir: string): { iconName: string; componentName: string; iconContent: string }[] => {\n\t// svg 内容\n\tconst svgContents: { iconName: string; componentName: string; iconContent: string }[] = [];\n\t// 获取当前目录下的文件\n\tconst svgFiles = fs.readdirSync(dir, {\n\t\twithFileTypes: true,\n\t});\n\n\tsvgFiles.forEach((file) => {\n\t\tif (file.isDirectory()) {\n\t\t\tsvgContents.push(...findSvgFile(path.join(dir, file.name)));\n\t\t} else {\n\t\t\tconst iconName = file.name.replace(\".svg\", \"\");\n\n\t\t\tconst svgContent = fs\n\t\t\t\t.readFileSync(path.join(dir, file.name), \"utf-8\")\n\t\t\t\t.replace(/<\\?xml.*?\\?>/, \"\")\n\t\t\t\t.replace(/<!DOCTYPE svg.*?>/, \"\")\n\t\t\t\t// .replace(/(\\r)|(\\n)/g, \"\")\n\t\t\t\t.trimStart()\n\t\t\t\t.trimEnd()\n\t\t\t\t// .replace(/(fill=\"[^>+].*?\")/g, 'fill=\"\"')\n\t\t\t\t.replace(/<svg([^>+].*?)>/, (match, attr) => {\n\t\t\t\t\tconst viewBoxMatch = attr.match(/viewBox=\"[^\"]+\"/);\n\t\t\t\t\tconst widthMatch = attr.match(/width=\"(\\d+)\"/);\n\t\t\t\t\tconst heightMatch = attr.match(/height=\"(\\d+)\"/);\n\t\t\t\t\tlet width = 1024;\n\t\t\t\t\tlet height = 1024;\n\t\t\t\t\tif (widthMatch) {\n\t\t\t\t\t\twidth = widthMatch[0];\n\t\t\t\t\t}\n\t\t\t\t\tif (heightMatch) {\n\t\t\t\t\t\theight = heightMatch[0];\n\t\t\t\t\t}\n\t\t\t\t\tlet viewBoxContent = \"\";\n\t\t\t\t\tif (!viewBoxMatch) {\n\t\t\t\t\t\tviewBoxContent = `viewBox=\"0 0 ${width} ${height}\"`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tviewBoxContent = viewBoxMatch[0];\n\t\t\t\t\t}\n\t\t\t\t\treturn `<svg xmlns=\"http://www.w3.org/2000/svg\" ${viewBoxContent}>`;\n\t\t\t\t});\n\n\t\t\tsvgContents.push({\n\t\t\t\t// iconName: iconName.charAt(0).toUpperCase() + iconName.slice(1),\n\t\t\t\ticonName,\n\t\t\t\tcomponentName: iconName.charAt(0).toUpperCase() + iconName.slice(1),\n\t\t\t\ticonContent: svgContent,\n\t\t\t});\n\t\t}\n\t});\n\n\treturn svgContents.sort((a, b) => {\n\t\tif (a.iconName < b.iconName) {\n\t\t\treturn -1;\n\t\t}\n\t\tif (a.iconName > b.iconName) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t});\n};\n\n/**\n * 写入 TSX  图标\n */\nconst writeTSXIcon = (componentName: string, iconDir: string, svgContent: string): void => {\n\tfs.mkdirSync(iconDir, { recursive: true });\n\n\tconst componentContent = `import { defineComponent } from \"vue\";\n\n/**\n * ${componentName} 图标组件\n */\nexport const ${componentName} = defineComponent({\n\tname: \"${componentName}\",\n\trender() {\n\t\treturn (\n${svgContent\n\t.split(\"\\n\")\n\t.map((line) => `\t\t\t${line}`)\n\t.join(\"\\n\")}\n\t\t);\n\t},\n});\n\nexport default ${componentName};\n`;\n\n\tfs.writeFileSync(path.join(iconDir, \"index.tsx\"), componentContent);\n};\n\n/**\n * 构建 svg 图标组件\n * @param dir svg 文件路径\n * @param writeDir 写入的文件路径 相对的即可\n */\nfunction buildSvgIcon(dir: string, writeDir: string): Plugin {\n\tif (!dir || !writeDir) return;\n\n\tlet config: ResolvedConfig;\n\n\treturn {\n\t\tname: \"fast-vite-plugin-build-svg-icon\",\n\t\tconfigResolved: (resolvedConfig: ResolvedConfig): void | Promise<void> => {\n\t\t\t// 存储最终解析的配置\n\t\t\tconfig = resolvedConfig;\n\t\t},\n\t\tbuildStart(): void | Promise<void> {\n\t\t\tconst svgFiles = findSvgFile(path.resolve(config.root, dir));\n\n\t\t\tconst iconsPath = path.resolve(config.root, writeDir);\n\t\t\tfs.mkdirSync(iconsPath, { recursive: true });\n\n\t\t\tlet iconImportContent = \"\";\n\t\t\tlet iconTypeContent = \"\";\n\t\t\tlet exportContent = \"\";\n\n\t\t\tsvgFiles.forEach((svg, idx) => {\n\t\t\t\twriteTSXIcon(svg.componentName, path.join(iconsPath, svg.iconName), svg.iconContent);\n\n\t\t\t\ticonImportContent += `import { ${svg.componentName} } from \"./${svg.iconName}\";\n`;\n\n\t\t\t\ticonTypeContent += `\t${svg.componentName},`;\n\n\t\t\t\texportContent += `export * from \"./${svg.iconName}\";\n`;\n\n\t\t\t\tif (idx + 1 < svgFiles.length) {\n\t\t\t\t\ticonTypeContent += \"\\n\";\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tfs.writeFileSync(\n\t\t\t\tpath.join(iconsPath, \"index.ts\"),\n\t\t\t\t`import type { DefineComponent } from \"vue\";\n${iconImportContent}\n${exportContent}\nexport default [\n${iconTypeContent}\n] as unknown as DefineComponent[];\n`\n\t\t\t);\n\t\t},\n\t};\n}\n\nexport { findSvgFile, writeTSXIcon, buildSvgIcon };\n","import fs from \"fs\";\nimport path from \"path\";\nimport externalGlobals from \"rollup-plugin-external-globals\";\nimport { viteExternalsPlugin } from \"vite-plugin-externals\";\nimport type { CdnImportOptions, Module } from \"./type\";\nimport type { HtmlTagDescriptor, Plugin, UserConfig } from \"vite\";\n\nconst isDev = process.env.NODE_ENV === \"development\";\n\n/**\n * get npm module version\n * @param name\n * @returns\n */\nfunction getModuleVersion(name: string): string {\n\tconst pwd = process.cwd();\n\tconst pkgFile = path.join(pwd, \"node_modules\", name, \"package.json\");\n\tif (fs.existsSync(pkgFile)) {\n\t\tconst pkgJson = JSON.parse(fs.readFileSync(pkgFile, \"utf8\"));\n\t\treturn pkgJson.version;\n\t}\n\n\treturn \"\";\n}\n\n/**\n * 是否完整的 url\n * @param path\n * @returns\n */\nfunction isFullPath(path: string): boolean {\n\treturn path.startsWith(\"http:\") || path.startsWith(\"https:\") || path.startsWith(\"//\") ? true : false;\n}\n\nfunction renderUrl(\n\turl: string,\n\tdata: {\n\t\tname: string;\n\t\tversion: string;\n\t\tpath: string;\n\t}\n): string {\n\tconst { path } = data;\n\tif (isFullPath(path)) {\n\t\turl = path;\n\t}\n\treturn url\n\t\t.replace(/\\{name\\}/g, data.name)\n\t\t.replace(/\\{version\\}/g, data.version)\n\t\t.replace(/\\{path\\}/g, path);\n}\n\nfunction getModuleInfo(module: Module, prodUrl: string): Module & { pathList?: string[]; cssList?: string[] } {\n\tprodUrl = module.prodUrl || prodUrl;\n\tconst v = module;\n\tconst version = module.version || getModuleVersion(v.name);\n\tlet pathList: string[] = [];\n\tif (!Array.isArray(v.path)) {\n\t\tpathList.push(v.path);\n\t} else {\n\t\tpathList = v.path;\n\t}\n\n\tconst data = {\n\t\t...v,\n\t\tversion,\n\t};\n\n\tpathList = pathList.map((p) => {\n\t\tif (!version && !isFullPath(p)) {\n\t\t\tthrow new Error(`modules: ${data.name} package.json file does not exist`);\n\t\t}\n\t\treturn renderUrl(prodUrl, {\n\t\t\tname: data.name,\n\t\t\tversion: data.version,\n\t\t\tpath: p,\n\t\t});\n\t});\n\n\tlet css = v.css || [];\n\tif (!Array.isArray(css) && css) {\n\t\tcss = [css];\n\t}\n\n\tconst cssList = !Array.isArray(css)\n\t\t? []\n\t\t: css.map((c) =>\n\t\t\t\trenderUrl(prodUrl, {\n\t\t\t\t\tname: data.name,\n\t\t\t\t\tversion: data.version,\n\t\t\t\t\tpath: c,\n\t\t\t\t})\n\t\t\t);\n\n\treturn {\n\t\t...v,\n\t\tversion,\n\t\tpathList,\n\t\tcssList,\n\t};\n}\n\nconst cdnJsDelivrUrl = \"https://cdn.jsdelivr.net/npm/{name}@{version}/{path}\";\nconst cdnUnpkgUrl = \"https://unpkg.com/{package}@{version}/{path}\";\n\n/**\n * CDN 导入\n * @param options\n * @returns\n */\nfunction cdnImport(options: CdnImportOptions): Plugin[] {\n\tconst { modules = [], prodUrl = cdnJsDelivrUrl, enableInDevMode = false, generateCssLinkTag, generateScriptTag } = options;\n\n\tlet isBuild = false;\n\n\tconst data = (Array.isArray(modules) ? modules : [modules])\n\t\t.map((v) => (typeof v === \"function\" ? v(prodUrl) : v))\n\t\t.map((v) => getModuleInfo(v, prodUrl));\n\n\tconst externalMap: {\n\t\t[name: string]: string;\n\t} = {};\n\n\tdata.forEach((v) => {\n\t\texternalMap[v.name] = v.var;\n\t\tif (Array.isArray(v.alias)) {\n\t\t\tv.alias.forEach((alias) => {\n\t\t\t\texternalMap[alias] = v.var;\n\t\t\t});\n\t\t}\n\t});\n\n\tconst plugins: Plugin[] = [\n\t\t{\n\t\t\tname: \"fast-vite-plugin-cdn-import\",\n\t\t\tenforce: \"pre\",\n\t\t\tconfig(_, { command }): UserConfig {\n\t\t\t\tisBuild = command === \"build\";\n\n\t\t\t\tconst userConfig: UserConfig = {\n\t\t\t\t\tbuild: {\n\t\t\t\t\t\trollupOptions: {\n\t\t\t\t\t\t\tplugins: [],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t\tif (isBuild) {\n\t\t\t\t\tuserConfig.build.rollupOptions.plugins = [externalGlobals(externalMap)];\n\t\t\t\t}\n\n\t\t\t\treturn userConfig;\n\t\t\t},\n\t\t\ttransformIndexHtml(html): string | HtmlTagDescriptor[] {\n\t\t\t\tif (!isBuild && !enableInDevMode) {\n\t\t\t\t\treturn html;\n\t\t\t\t}\n\n\t\t\t\tconst descriptors: HtmlTagDescriptor[] = [];\n\n\t\t\t\tdata.forEach((v) => {\n\t\t\t\t\tv.pathList.forEach((url) => {\n\t\t\t\t\t\tconst cusomize = generateScriptTag?.(v.name, url) || {};\n\t\t\t\t\t\tconst attrs = {\n\t\t\t\t\t\t\tsrc: url,\n\t\t\t\t\t\t\tcrossorigin: \"anonymous\",\n\t\t\t\t\t\t\t...(v?.attrs ?? {}),\n\t\t\t\t\t\t\t...cusomize.attrs,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tdescriptors.push({\n\t\t\t\t\t\t\ttag: \"script\",\n\t\t\t\t\t\t\tattrs,\n\t\t\t\t\t\t\t...cusomize,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\tv.cssList.forEach((url) => {\n\t\t\t\t\t\tconst cusomize = generateCssLinkTag?.(v.name, url) || {};\n\t\t\t\t\t\tconst attrs = {\n\t\t\t\t\t\t\thref: url,\n\t\t\t\t\t\t\trel: \"stylesheet\",\n\t\t\t\t\t\t\tcrossorigin: \"anonymous\",\n\t\t\t\t\t\t\t...(v?.attrs ?? {}),\n\t\t\t\t\t\t\t...cusomize.attrs,\n\t\t\t\t\t\t};\n\t\t\t\t\t\tdescriptors.push({\n\t\t\t\t\t\t\ttag: \"link\",\n\t\t\t\t\t\t\tattrs,\n\t\t\t\t\t\t\t...cusomize,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\treturn descriptors;\n\t\t\t},\n\t\t},\n\t];\n\n\tif (isDev && enableInDevMode) {\n\t\tplugins.push(\n\t\t\tviteExternalsPlugin(externalMap, {\n\t\t\t\tenforce: \"pre\",\n\t\t\t})\n\t\t);\n\t}\n\n\treturn plugins;\n}\n\nexport { cdnImport, cdnJsDelivrUrl, cdnUnpkgUrl };\n","import fs from \"fs\";\nimport path from \"path\";\nimport type { AutoImportOptions } from \"./type\";\nimport type { Plugin, ResolvedConfig, ViteDevServer } from \"vite\";\n\n/**\n * 将路径转换为 Unix 风格\n */\nfunction slash(path: string): string {\n\treturn path.replace(/\\\\/g, \"/\");\n}\n\n/**\n * Pascal Case 转换\n */\nfunction pascalCase(str: string): string {\n\treturn str.replace(/[-_](\\w)/g, (_, c) => (c ? c.toUpperCase() : \"\")).replace(/^\\w/, (c) => c.toUpperCase());\n}\n\n/**\n * 组件自动导入\n * @param options 选项\n */\nfunction componentAutoImport(options: AutoImportOptions = {}): Plugin {\n\tconst {\n\t\tdir = \"src/components\",\n\t\texportPath = \"src/components/index.ts\",\n\t\tdts = true,\n\t\tdtsPath = \"types/component.d.ts\",\n\t\tdeep = true,\n\t\textensions = [\"vue\", \"tsx\", \"jsx\"],\n\t\tformatter,\n\t} = options;\n\n\tlet config: ResolvedConfig;\n\tconst componentMap = new Map<\n\t\tstring,\n\t\t{\n\t\t\t/** 组件名称 (PascalCase) */\n\t\t\tname: string;\n\t\t\t/** 组件文件路径 (绝对路径) */\n\t\t\tfrom: string;\n\t\t}\n\t>();\n\tlet watcher: fs.FSWatcher | null = null;\n\n\t/** 从文件路径获取组件名 */\n\tconst getNameFromPath = (filePath: string): string => {\n\t\t// 移除扩展名\n\t\tlet name = filePath;\n\t\tfor (const ext of extensions) {\n\t\t\tif (name.endsWith(`.${ext}`)) {\n\t\t\t\tname = name.slice(0, -ext.length - 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// 如果是 index 文件，使用父目录名\n\t\tif (name.endsWith(\"/index\") || name.endsWith(\"\\\\index\")) {\n\t\t\tconst parts = name.split(/[\\\\/]/);\n\t\t\tname = parts[parts.length - 2] || parts[parts.length - 1];\n\t\t} else {\n\t\t\tconst parts = name.split(/[\\\\/]/);\n\t\t\tname = parts[parts.length - 1];\n\t\t}\n\n\t\tif (formatter) {\n\t\t\treturn formatter(name);\n\t\t} else {\n\t\t\treturn pascalCase(name);\n\t\t}\n\t};\n\n\t/** 递归扫描目录 */\n\tconst scanDirectory = (dirPath: string, depth = 0): string[] => {\n\t\tconst files: string[] = [];\n\n\t\tif (!fs.existsSync(dirPath)) {\n\t\t\treturn files;\n\t\t}\n\n\t\tconst entries = fs.readdirSync(dirPath, { withFileTypes: true });\n\n\t\tfor (const entry of entries) {\n\t\t\tconst fullPath = path.join(dirPath, entry.name);\n\n\t\t\tif (entry.isDirectory()) {\n\t\t\t\t// 跳过 node_modules 等\n\t\t\t\tif (entry.name === \"node_modules\" || entry.name.startsWith(\". \")) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// 深度扫描\n\t\t\t\tif (deep || depth === 0) {\n\t\t\t\t\tfiles.push(...scanDirectory(fullPath, depth + 1));\n\t\t\t\t}\n\t\t\t} else if (entry.isFile()) {\n\t\t\t\t// 检查文件扩展名\n\t\t\t\tconst ext = path.extname(entry.name).slice(1);\n\t\t\t\tif (extensions.includes(ext)) {\n\t\t\t\t\tfiles.push(fullPath);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn files;\n\t};\n\n\t/** 扫描组件文件 */\n\tconst scanComponents = (): void => {\n\t\tcomponentMap.clear();\n\n\t\tconst fullDir = path.resolve(config.root, dir);\n\n\t\tif (!fs.existsSync(fullDir)) {\n\t\t\tconsole.warn(`[component-auto-import] Directory not found: ${fullDir}`);\n\t\t\treturn;\n\t\t}\n\n\t\tconst files = scanDirectory(fullDir);\n\n\t\tfiles.forEach((absolutePath) => {\n\t\t\tconst relativePath = path.relative(fullDir, absolutePath);\n\t\t\tconst componentName = getNameFromPath(relativePath);\n\n\t\t\tcomponentMap.set(componentName, {\n\t\t\t\tname: componentName,\n\t\t\t\tfrom: absolutePath,\n\t\t\t});\n\t\t});\n\t};\n\n\t/** 生成自动注册文件 */\n\tconst generateAutoRegister = (): void => {\n\t\tif (componentMap.size === 0) return;\n\n\t\tconst components = Array.from(componentMap.values()).sort((a, b) => a.name.localeCompare(b.name));\n\n\t\tconst registerFilePath = path.resolve(config.root, exportPath);\n\t\tconst componentDir = path.dirname(registerFilePath);\n\n\t\tconst lines: string[] = [];\n\t\tlines.push(\"/* eslint-disable */\");\n\t\tlines.push(\"/* prettier-ignore */\");\n\t\tlines.push(\"// @ts-nocheck\");\n\t\tlines.push(\"// Auto-generated by fast component-auto-import\");\n\t\tlines.push(\"// Generated by fast-vite-plugins\");\n\t\tlines.push(\"// Do not edit this file manually\");\n\t\tlines.push(\"\");\n\t\tlines.push('import type { App } from \"vue\";');\n\t\tlines.push(\"\");\n\n\t\t// 生成 import 语句\n\t\tcomponents.forEach(({ name, from }) => {\n\t\t\tconst relativePath = slash(path.relative(componentDir, from));\n\t\t\tconst importPath = relativePath.startsWith(\".\") ? relativePath : `./${relativePath}`;\n\t\t\tlines.push(`import ${name} from \"${importPath}\";`);\n\t\t\tlines.push(`export { ${name} };`);\n\t\t\tlines.push(`export type ${name}Instance = InstanceType<typeof ${name}>;`);\n\t\t});\n\n\t\tlines.push(\"\");\n\t\tlines.push(\"/** 自动注册所有组件 */\");\n\t\tlines.push(\"export function registerComponents(app: App): void {\");\n\n\t\tcomponents.forEach(({ name }) => {\n\t\t\tlines.push(`\tapp.component(${name}.name, ${name});`);\n\t\t});\n\n\t\tlines.push(\"}\");\n\t\tlines.push(\"\");\n\n\t\tconst code = `${lines.join(\"\\n\")}\\n`;\n\n\t\tconst existingCode = fs.existsSync(registerFilePath) ? fs.readFileSync(registerFilePath, \"utf-8\") : \"\";\n\n\t\tif (code !== existingCode) {\n\t\t\tfs.writeFileSync(registerFilePath, code, \"utf-8\");\n\t\t}\n\t};\n\n\t/** 生成类型声明文件 */\n\tconst generateDts = (): void => {\n\t\tif (!dts || componentMap.size === 0) return;\n\n\t\tconst components = Array.from(componentMap.values()).sort((a, b) => a.name.localeCompare(b.name));\n\n\t\tconst dtsFullPath = path.resolve(config.root, dtsPath);\n\t\tconst dtsDir = path.dirname(dtsFullPath);\n\n\t\t// 生成类型声明内容\n\t\tconst lines: string[] = [];\n\t\tlines.push(\"// For this project development\");\n\t\tlines.push(\"// Auto-generated by fast component-auto-import\");\n\t\tlines.push(\"// Generated by fast-vite-plugins\");\n\t\tlines.push(\"// Do not edit this file manually\");\n\t\tlines.push(\"\");\n\t\tlines.push('import \"@vue/runtime-core\";');\n\t\tlines.push(\"\");\n\t\tlines.push(\"// GlobalComponents for Volar\");\n\t\tlines.push('declare module \"@vue/runtime-core\" {');\n\t\tlines.push(\"\texport interface GlobalComponents {\");\n\n\t\tcomponents.forEach(({ name, from }) => {\n\t\t\t// 计算相对路径\n\t\t\tlet relativePath = slash(path.relative(dtsDir, from));\n\n\t\t\t// 移除文件扩展名\n\t\t\trelativePath = relativePath.replace(/\\.(vue|tsx|jsx)$/, \"\");\n\n\t\t\t// 确保以 ./ 开头\n\t\t\tconst importPath = relativePath.startsWith(\".\") ? relativePath : `./${relativePath}`;\n\n\t\t\tlines.push(`\t\t${name}: (typeof import(\"${importPath}\"))[\"default\"];`);\n\t\t});\n\n\t\tlines.push(\"\t}\");\n\t\tlines.push(\"}\");\n\t\tlines.push(\"\");\n\t\tlines.push(\"export {};\");\n\n\t\tconst code = `${lines.join(\"\\n\")}\\n`;\n\n\t\t// 确保目录存在\n\t\tif (!fs.existsSync(dtsDir)) {\n\t\t\tfs.mkdirSync(dtsDir, { recursive: true });\n\t\t}\n\n\t\t// 只有内容变化时才写入\n\t\tconst existingCode = fs.existsSync(dtsFullPath) ? fs.readFileSync(dtsFullPath, \"utf-8\") : \"\";\n\n\t\tif (code !== existingCode) {\n\t\t\tfs.writeFileSync(dtsFullPath, code, \"utf-8\");\n\t\t}\n\t};\n\n\treturn {\n\t\tname: \"fast-vite-plugin-component-auto-import\",\n\t\tenforce: \"post\",\n\t\tconfigResolved: (resolvedConfig: ResolvedConfig): void | Promise<void> => {\n\t\t\t// 存储最终解析的配置\n\t\t\tconfig = resolvedConfig;\n\t\t},\n\t\tbuildStart(): void | Promise<void> {\n\t\t\tscanComponents();\n\t\t\tgenerateAutoRegister();\n\t\t\tgenerateDts();\n\t\t},\n\t\t// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n\t\tconfigureServer(server: ViteDevServer) {\n\t\t\tconst fullDir = path.resolve(config.root, dir);\n\n\t\t\t// 监听文件变化\n\t\t\tif (fs.existsSync(fullDir)) {\n\t\t\t\twatcher = fs.watch(fullDir, { recursive: true }, (eventType, filename) => {\n\t\t\t\t\tif (!filename) return;\n\t\t\t\t\t// 忽略 .d.ts 文件\n\t\t\t\t\tif (filename.endsWith(\".d.ts\")) return;\n\n\t\t\t\t\t// 检查是否是组件文件\n\t\t\t\t\tconst ext = path.extname(filename).slice(1);\n\t\t\t\t\tif (!extensions.includes(ext)) return;\n\n\t\t\t\t\tscanComponents();\n\t\t\t\t\tgenerateAutoRegister();\n\t\t\t\t\tgenerateDts();\n\n\t\t\t\t\t// 通知客户端刷新\n\t\t\t\t\tserver.ws.send({ type: \"full-reload\", path: \"*\" });\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tbuildEnd(): void | Promise<void> {\n\t\t\t// 关闭监听器\n\t\t\tif (watcher) {\n\t\t\t\twatcher.close();\n\t\t\t\twatcher = null;\n\t\t\t}\n\t\t},\n\t};\n}\n\nexport { componentAutoImport };\n","import fs from \"fs\";\nimport path from \"path\";\nimport type { BuildRouterPathOptions } from \"./type\";\nimport type { Plugin, ResolvedConfig, ViteDevServer } from \"vite\";\n\n/**\n * Pascal Case 转换\n */\nfunction pascalCase(str: string): string {\n\treturn str.replace(/[-_](\\w)/g, (_, c) => (c ? c.toUpperCase() : \"\")).replace(/^\\w/, (c) => c.toUpperCase());\n}\n\n/**\n * 从文件内容中提取组件名称\n */\nfunction extractComponentName(fileContent: string): string | null {\n\t// 匹配 defineOptions({ name: 'xxx' })\n\tconst defineOptionsRegex = /defineOptions\\(\\s*\\{\\s*name:\\s*[\"']([^\"']+)[\"']/;\n\tconst defineOptionsMatch = fileContent.match(defineOptionsRegex);\n\treturn defineOptionsMatch ? defineOptionsMatch[1] : null;\n}\n\n/**\n * 路由路径生成\n * @param options 选项\n */\nfunction buildRouterPath(options: BuildRouterPathOptions = {}): Plugin {\n\tconst { dir = \"src/views\", exportPath = \"src/router/index.json\", deep = true, extensions = [\"vue\", \"tsx\", \"jsx\"], formatter } = options;\n\n\tlet config: ResolvedConfig;\n\tlet watcher: fs.FSWatcher | null = null;\n\n\t/** 递归获取目录下所有符合扩展名的文件*/\n\tconst getAllFiles = (dirPath: string, fileList: string[] = []): string[] => {\n\t\tif (!fs.existsSync(dirPath)) {\n\t\t\treturn fileList;\n\t\t}\n\n\t\tconst files = fs.readdirSync(dirPath);\n\t\tfiles.forEach((file) => {\n\t\t\tconst filePath = path.join(dirPath, file);\n\t\t\tconst stat = fs.statSync(filePath);\n\n\t\t\tif (stat.isDirectory()) {\n\t\t\t\tif (deep) {\n\t\t\t\t\tgetAllFiles(filePath, fileList);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst ext = path.extname(filePath).slice(1);\n\t\t\t\tif (extensions.includes(ext)) {\n\t\t\t\t\tfileList.push(filePath);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn fileList;\n\t};\n\n\t/** 生成路径-名称映射 */\n\tconst generatePathNameMap = (): void => {\n\t\tconst targetDir = path.resolve(config.root, dir);\n\t\tconst files = getAllFiles(targetDir);\n\n\t\tconst pathNameMap: Record<string, string> = files.reduce((acc, filePath) => {\n\t\t\ttry {\n\t\t\t\tconst content = fs.readFileSync(filePath, \"utf-8\");\n\t\t\t\tconst componentName = extractComponentName(content);\n\n\t\t\t\t// 生成相对路径\n\t\t\t\tconst relativePath = `/${path.relative(config.root, filePath).replace(/\\\\/g, \"/\")}`;\n\n\t\t\t\t// 确定最终的组件名称\n\t\t\t\tlet finalName: string;\n\t\t\t\tif (componentName) {\n\t\t\t\t\tfinalName = componentName;\n\t\t\t\t} else {\n\t\t\t\t\tconst fileName = path.basename(filePath, path.extname(filePath));\n\t\t\t\t\tfinalName = formatter ? formatter(fileName) : pascalCase(fileName);\n\t\t\t\t}\n\n\t\t\t\tacc[relativePath] = finalName;\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(`Error processing file ${filePath}:`, error);\n\t\t\t}\n\t\t\treturn acc;\n\t\t}, {});\n\n\t\t// 写入 JSON 文件\n\t\tconst outputPath = path.resolve(config.root, exportPath);\n\t\tconst outputDir = path.dirname(outputPath);\n\n\t\t// 确保输出目录存在\n\t\tif (!fs.existsSync(outputDir)) {\n\t\t\tfs.mkdirSync(outputDir, { recursive: true });\n\t\t}\n\n\t\tconst outputContent = JSON.stringify(pathNameMap, null, 2);\n\t\tfs.writeFileSync(outputPath, outputContent, \"utf-8\");\n\t};\n\n\treturn {\n\t\tname: \"fast-vite-plugin-router-path\",\n\t\tenforce: \"post\",\n\t\tconfigResolved: (resolvedConfig: ResolvedConfig): void | Promise<void> => {\n\t\t\t// 存储最终解析的配置\n\t\t\tconfig = resolvedConfig;\n\t\t},\n\t\tbuildStart(): void | Promise<void> {\n\t\t\tgeneratePathNameMap();\n\t\t},\n\t\t// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n\t\tconfigureServer(server: ViteDevServer) {\n\t\t\tconst fullDir = path.resolve(config.root, dir);\n\n\t\t\t// 监听文件变化\n\t\t\tif (fs.existsSync(fullDir)) {\n\t\t\t\twatcher = fs.watch(fullDir, { recursive: true }, (eventType, filename) => {\n\t\t\t\t\tif (!filename) return;\n\t\t\t\t\t// 忽略 . d.ts 文件和 JSON 文件\n\t\t\t\t\tif (filename.endsWith(\".d.ts\") || filename.endsWith(\".json\")) return;\n\n\t\t\t\t\t// 检查是否是组件文件\n\t\t\t\t\tconst ext = path.extname(filename).slice(1);\n\t\t\t\t\tif (!extensions.includes(ext)) return;\n\n\t\t\t\t\tgeneratePathNameMap();\n\n\t\t\t\t\t// 通知客户端刷新\n\t\t\t\t\tserver.ws.send({ type: \"full-reload\", path: \"*\" });\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tbuildEnd(): void | Promise<void> {\n\t\t\t// 关闭监听器\n\t\t\tif (watcher) {\n\t\t\t\twatcher.close();\n\t\t\t\twatcher = null;\n\t\t\t}\n\t\t},\n\t};\n}\n\nexport { buildRouterPath };\n","import fs from \"fs\";\nimport path from \"path\";\nimport type { Plugin, ResolvedConfig } from \"vite\";\n\nfunction padZero(num: number, length = 2): string {\n\treturn num.toString().padStart(length, \"0\");\n}\n\nfunction formatDate(date: Date): string {\n\tconst year = date.getUTCFullYear();\n\tconst month = padZero(date.getUTCMonth() + 1);\n\tconst day = padZero(date.getUTCDate());\n\tconst hours = padZero(date.getUTCHours());\n\tconst minutes = padZero(date.getUTCMinutes());\n\tconst seconds = padZero(date.getUTCSeconds());\n\tconst milliseconds = padZero(date.getUTCMilliseconds(), 3);\n\n\treturn `Z ${year}-${month}-${day} ${hours}:${minutes}:${seconds}.${milliseconds}`;\n}\n\n/**\n * 版本更新插件\n * @param version 不要携带 'v'，示例：1.0.0\n * @returns\n */\nfunction versionUpdatePlugin(version: string): Plugin {\n\tlet config: ResolvedConfig;\n\n\treturn {\n\t\tname: \"fast-vite-plugin-version-update\",\n\t\tconfigResolved: (resolvedConfig: ResolvedConfig): void | Promise<void> => {\n\t\t\t// 存储最终解析的配置\n\t\t\tconfig = resolvedConfig;\n\t\t},\n\t\tbuildStart(): void | Promise<void> {\n\t\t\tconst curDate = new Date();\n\n\t\t\tconst dateTime = formatDate(curDate);\n\n\t\t\tconst versionDir = config.publicDir;\n\t\t\tconst versionPath = path.join(versionDir, \"version.json\");\n\t\t\tif (!fs.existsSync(versionDir)) {\n\t\t\t\tfs.mkdirSync(versionDir);\n\t\t\t}\n\n\t\t\t// 写入版本信息文件\n\t\t\tconst content = JSON.stringify({ version: `v${version}`, dateTime }, null, 4);\n\t\t\tfs.writeFileSync(versionPath, content);\n\n\t\t\tconst pkgPath = path.join(config.base, \"package.json\");\n\t\t\tif (fs.existsSync(pkgPath)) {\n\t\t\t\tconst pkgJson = JSON.parse(fs.readFileSync(pkgPath, \"utf-8\"));\n\t\t\t\tpkgJson.version = version;\n\t\t\t\tfs.writeFileSync(pkgPath, JSON.stringify(pkgJson, null, 2), \"utf-8\");\n\t\t\t}\n\t\t},\n\t};\n}\n\nexport { versionUpdatePlugin };\n"],"mappings":"AAAA,OAAOA,MAAQ,KACf,OAAOC,MAAU,OAOjB,IAAMC,EAAeC,GAAoF,CAExG,IAAMC,EAAkF,CAAC,EAMzF,OAJiBJ,EAAG,YAAYG,EAAK,CACpC,cAAe,EAChB,CAAC,EAEQ,QAASE,GAAS,CAC1B,GAAIA,EAAK,YAAY,EACpBD,EAAY,KAAK,GAAGF,EAAYD,EAAK,KAAKE,EAAKE,EAAK,IAAI,CAAC,CAAC,MACpD,CACN,IAAMC,EAAWD,EAAK,KAAK,QAAQ,OAAQ,EAAE,EAEvCE,EAAaP,EACjB,aAAaC,EAAK,KAAKE,EAAKE,EAAK,IAAI,EAAG,OAAO,EAC/C,QAAQ,eAAgB,EAAE,EAC1B,QAAQ,oBAAqB,EAAE,EAE/B,UAAU,EACV,QAAQ,EAER,QAAQ,kBAAmB,CAACG,EAAOC,IAAS,CAC5C,IAAMC,EAAeD,EAAK,MAAM,iBAAiB,EAC3CE,EAAaF,EAAK,MAAM,eAAe,EACvCG,EAAcH,EAAK,MAAM,gBAAgB,EAC3CI,EAAQ,KACRC,EAAS,KACTH,IACHE,EAAQF,EAAW,CAAC,GAEjBC,IACHE,EAASF,EAAY,CAAC,GAEvB,IAAIG,EAAiB,GACrB,OAAKL,EAGJK,EAAiBL,EAAa,CAAC,EAF/BK,EAAiB,gBAAgBF,CAAK,IAAIC,CAAM,IAI1C,2CAA2CC,CAAc,GACjE,CAAC,EAEFX,EAAY,KAAK,CAEhB,SAAAE,EACA,cAAeA,EAAS,OAAO,CAAC,EAAE,YAAY,EAAIA,EAAS,MAAM,CAAC,EAClE,YAAaC,CACd,CAAC,CACF,CACD,CAAC,EAEMH,EAAY,KAAK,CAAC,EAAGY,IACvB,EAAE,SAAWA,EAAE,SACX,GAEJ,EAAE,SAAWA,EAAE,SACX,EAED,CACP,CACF,EAKMC,EAAe,CAACC,EAAuBC,EAAiBZ,IAA6B,CAC1FP,EAAG,UAAUmB,EAAS,CAAE,UAAW,EAAK,CAAC,EAEzC,IAAMC,EAAmB;AAAA;AAAA;AAAA,KAGrBF,CAAa;AAAA;AAAA,eAEHA,CAAa;AAAA,UAClBA,CAAa;AAAA;AAAA;AAAA,EAGrBX,EACA,MAAM;AAAA,CAAI,EACV,IAAKc,GAAS,MAAMA,CAAI,EAAE,EAC1B,KAAK;AAAA,CAAI,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,iBAKKH,CAAa;AAAA,EAG7BlB,EAAG,cAAcC,EAAK,KAAKkB,EAAS,WAAW,EAAGC,CAAgB,CACnE,EAOA,SAASE,GAAanB,EAAaoB,EAA0B,CAC5D,GAAI,CAACpB,GAAO,CAACoB,EAAU,OAEvB,IAAIC,EAEJ,MAAO,CACN,KAAM,kCACN,eAAiBC,GAAyD,CAEzED,EAASC,CACV,EACA,YAAmC,CAClC,IAAMC,EAAWxB,EAAYD,EAAK,QAAQuB,EAAO,KAAMrB,CAAG,CAAC,EAErDwB,EAAY1B,EAAK,QAAQuB,EAAO,KAAMD,CAAQ,EACpDvB,EAAG,UAAU2B,EAAW,CAAE,UAAW,EAAK,CAAC,EAE3C,IAAIC,EAAoB,GACpBC,EAAkB,GAClBC,EAAgB,GAEpBJ,EAAS,QAAQ,CAACK,EAAKC,IAAQ,CAC9Bf,EAAac,EAAI,cAAe9B,EAAK,KAAK0B,EAAWI,EAAI,QAAQ,EAAGA,EAAI,WAAW,EAEnFH,GAAqB,YAAYG,EAAI,aAAa,cAAcA,EAAI,QAAQ;AAAA,EAG5EF,GAAmB,IAAIE,EAAI,aAAa,IAExCD,GAAiB,oBAAoBC,EAAI,QAAQ;AAAA,EAG7CC,EAAM,EAAIN,EAAS,SACtBG,GAAmB;AAAA,EAErB,CAAC,EAED7B,EAAG,cACFC,EAAK,KAAK0B,EAAW,UAAU,EAC/B;AAAA,EACFC,CAAiB;AAAA,EACjBE,CAAa;AAAA;AAAA,EAEbD,CAAe;AAAA;AAAA,CAGd,CACD,CACD,CACD,CC1JA,OAAOI,MAAQ,KACf,OAAOC,MAAU,OACjB,OAAOC,MAAqB,iCAC5B,OAAS,uBAAAC,MAA2B,wBAIpC,IAAMC,EAAQ,QAAQ,IAAI,WAAa,cAOvC,SAASC,EAAiBC,EAAsB,CAC/C,IAAMC,EAAM,QAAQ,IAAI,EAClBC,EAAUP,EAAK,KAAKM,EAAK,eAAgBD,EAAM,cAAc,EACnE,OAAIN,EAAG,WAAWQ,CAAO,EACR,KAAK,MAAMR,EAAG,aAAaQ,EAAS,MAAM,CAAC,EAC5C,QAGT,EACR,CAOA,SAASC,EAAWR,EAAuB,CAC1C,MAAO,GAAAA,EAAK,WAAW,OAAO,GAAKA,EAAK,WAAW,QAAQ,GAAKA,EAAK,WAAW,IAAI,EACrF,CAEA,SAASS,EACRC,EACAC,EAKS,CACT,GAAM,CAAE,KAAAX,CAAK,EAAIW,EACjB,OAAIH,EAAWR,CAAI,IAClBU,EAAMV,GAEAU,EACL,QAAQ,YAAaC,EAAK,IAAI,EAC9B,QAAQ,eAAgBA,EAAK,OAAO,EACpC,QAAQ,YAAaX,CAAI,CAC5B,CAEA,SAASY,EAAcC,EAAgBC,EAAuE,CAC7GA,EAAUD,EAAO,SAAWC,EAC5B,IAAMC,EAAIF,EACJG,EAAUH,EAAO,SAAWT,EAAiBW,EAAE,IAAI,EACrDE,EAAqB,CAAC,EACrB,MAAM,QAAQF,EAAE,IAAI,EAGxBE,EAAWF,EAAE,KAFbE,EAAS,KAAKF,EAAE,IAAI,EAKrB,IAAMJ,EAAO,CACZ,GAAGI,EACH,QAAAC,CACD,EAEAC,EAAWA,EAAS,IAAKC,GAAM,CAC9B,GAAI,CAACF,GAAW,CAACR,EAAWU,CAAC,EAC5B,MAAM,IAAI,MAAM,YAAYP,EAAK,IAAI,mCAAmC,EAEzE,OAAOF,EAAUK,EAAS,CACzB,KAAMH,EAAK,KACX,QAASA,EAAK,QACd,KAAMO,CACP,CAAC,CACF,CAAC,EAED,IAAIC,EAAMJ,EAAE,KAAO,CAAC,EAChB,CAAC,MAAM,QAAQI,CAAG,GAAKA,IAC1BA,EAAM,CAACA,CAAG,GAGX,IAAMC,EAAW,MAAM,QAAQD,CAAG,EAE/BA,EAAI,IAAKE,GACTZ,EAAUK,EAAS,CAClB,KAAMH,EAAK,KACX,QAASA,EAAK,QACd,KAAMU,CACP,CAAC,CACF,EAPC,CAAC,EASJ,MAAO,CACN,GAAGN,EACH,QAAAC,EACA,SAAAC,EACA,QAAAG,CACD,CACD,CAEA,IAAME,EAAiB,uDACjBC,GAAc,+CAOpB,SAASC,GAAUC,EAAqC,CACvD,GAAM,CAAE,QAAAC,EAAU,CAAC,EAAG,QAAAZ,EAAUQ,EAAgB,gBAAAK,EAAkB,GAAO,mBAAAC,EAAoB,kBAAAC,CAAkB,EAAIJ,EAE/GK,EAAU,GAERnB,GAAQ,MAAM,QAAQe,CAAO,EAAIA,EAAU,CAACA,CAAO,GACvD,IAAKX,GAAO,OAAOA,GAAM,WAAaA,EAAED,CAAO,EAAIC,CAAE,EACrD,IAAKA,GAAMH,EAAcG,EAAGD,CAAO,CAAC,EAEhCiB,EAEF,CAAC,EAELpB,EAAK,QAASI,GAAM,CACnBgB,EAAYhB,EAAE,IAAI,EAAIA,EAAE,IACpB,MAAM,QAAQA,EAAE,KAAK,GACxBA,EAAE,MAAM,QAASiB,GAAU,CAC1BD,EAAYC,CAAK,EAAIjB,EAAE,GACxB,CAAC,CAEH,CAAC,EAED,IAAMkB,EAAoB,CACzB,CACC,KAAM,8BACN,QAAS,MACT,OAAOC,EAAG,CAAE,QAAAC,CAAQ,EAAe,CAClCL,EAAUK,IAAY,QAEtB,IAAMC,EAAyB,CAC9B,MAAO,CACN,cAAe,CACd,QAAS,CAAC,CACX,CACD,CACD,EAEA,OAAIN,IACHM,EAAW,MAAM,cAAc,QAAU,CAACnC,EAAgB8B,CAAW,CAAC,GAGhEK,CACR,EACA,mBAAmBC,EAAoC,CACtD,GAAI,CAACP,GAAW,CAACH,EAChB,OAAOU,EAGR,IAAMC,EAAmC,CAAC,EAE1C,OAAA3B,EAAK,QAASI,GAAM,CACnBA,EAAE,SAAS,QAASL,GAAQ,CAC3B,IAAM6B,EAAWV,IAAoBd,EAAE,KAAML,CAAG,GAAK,CAAC,EAChD8B,EAAQ,CACb,IAAK9B,EACL,YAAa,YACb,GAAIK,GAAG,OAAS,CAAC,EACjB,GAAGwB,EAAS,KACb,EAEAD,EAAY,KAAK,CAChB,IAAK,SACL,MAAAE,EACA,GAAGD,CACJ,CAAC,CACF,CAAC,EACDxB,EAAE,QAAQ,QAASL,GAAQ,CAC1B,IAAM6B,EAAWX,IAAqBb,EAAE,KAAML,CAAG,GAAK,CAAC,EACjD8B,EAAQ,CACb,KAAM9B,EACN,IAAK,aACL,YAAa,YACb,GAAIK,GAAG,OAAS,CAAC,EACjB,GAAGwB,EAAS,KACb,EACAD,EAAY,KAAK,CAChB,IAAK,OACL,MAAAE,EACA,GAAGD,CACJ,CAAC,CACF,CAAC,CACF,CAAC,EAEMD,CACR,CACD,CACD,EAEA,OAAInC,GAASwB,GACZM,EAAQ,KACP/B,EAAoB6B,EAAa,CAChC,QAAS,KACV,CAAC,CACF,EAGME,CACR,CC/MA,OAAOQ,MAAQ,KACf,OAAOC,MAAU,OAOjB,SAASC,EAAMD,EAAsB,CACpC,OAAOA,EAAK,QAAQ,MAAO,GAAG,CAC/B,CAKA,SAASE,EAAWC,EAAqB,CACxC,OAAOA,EAAI,QAAQ,YAAa,CAACC,EAAGC,IAAOA,EAAIA,EAAE,YAAY,EAAI,EAAG,EAAE,QAAQ,MAAQA,GAAMA,EAAE,YAAY,CAAC,CAC5G,CAMA,SAASC,GAAoBC,EAA6B,CAAC,EAAW,CACrE,GAAM,CACL,IAAAC,EAAM,iBACN,WAAAC,EAAa,0BACb,IAAAC,EAAM,GACN,QAAAC,EAAU,uBACV,KAAAC,EAAO,GACP,WAAAC,EAAa,CAAC,MAAO,MAAO,KAAK,EACjC,UAAAC,CACD,EAAIP,EAEAQ,EACEC,EAAe,IAAI,IASrBC,EAA+B,KAG7BC,EAAmBC,GAA6B,CAErD,IAAIC,EAAOD,EACX,QAAWE,KAAOR,EACjB,GAAIO,EAAK,SAAS,IAAIC,CAAG,EAAE,EAAG,CAC7BD,EAAOA,EAAK,MAAM,EAAG,CAACC,EAAI,OAAS,CAAC,EACpC,KACD,CAID,GAAID,EAAK,SAAS,QAAQ,GAAKA,EAAK,SAAS,SAAS,EAAG,CACxD,IAAME,EAAQF,EAAK,MAAM,OAAO,EAChCA,EAAOE,EAAMA,EAAM,OAAS,CAAC,GAAKA,EAAMA,EAAM,OAAS,CAAC,CACzD,KAAO,CACN,IAAMA,EAAQF,EAAK,MAAM,OAAO,EAChCA,EAAOE,EAAMA,EAAM,OAAS,CAAC,CAC9B,CAEA,OAAIR,EACIA,EAAUM,CAAI,EAEdlB,EAAWkB,CAAI,CAExB,EAGMG,EAAgB,CAACC,EAAiBC,EAAQ,IAAgB,CAC/D,IAAMC,EAAkB,CAAC,EAEzB,GAAI,CAAC3B,EAAG,WAAWyB,CAAO,EACzB,OAAOE,EAGR,IAAMC,EAAU5B,EAAG,YAAYyB,EAAS,CAAE,cAAe,EAAK,CAAC,EAE/D,QAAWI,KAASD,EAAS,CAC5B,IAAME,EAAW7B,EAAK,KAAKwB,EAASI,EAAM,IAAI,EAE9C,GAAIA,EAAM,YAAY,EAAG,CAExB,GAAIA,EAAM,OAAS,gBAAkBA,EAAM,KAAK,WAAW,IAAI,EAC9D,UAIGhB,GAAQa,IAAU,IACrBC,EAAM,KAAK,GAAGH,EAAcM,EAAUJ,EAAQ,CAAC,CAAC,CAElD,SAAWG,EAAM,OAAO,EAAG,CAE1B,IAAMP,EAAMrB,EAAK,QAAQ4B,EAAM,IAAI,EAAE,MAAM,CAAC,EACxCf,EAAW,SAASQ,CAAG,GAC1BK,EAAM,KAAKG,CAAQ,CAErB,CACD,CAEA,OAAOH,CACR,EAGMI,EAAiB,IAAY,CAClCd,EAAa,MAAM,EAEnB,IAAMe,EAAU/B,EAAK,QAAQe,EAAO,KAAMP,CAAG,EAE7C,GAAI,CAACT,EAAG,WAAWgC,CAAO,EAAG,CAC5B,QAAQ,KAAK,gDAAgDA,CAAO,EAAE,EACtE,MACD,CAEcR,EAAcQ,CAAO,EAE7B,QAASC,GAAiB,CAC/B,IAAMC,EAAejC,EAAK,SAAS+B,EAASC,CAAY,EAClDE,EAAgBhB,EAAgBe,CAAY,EAElDjB,EAAa,IAAIkB,EAAe,CAC/B,KAAMA,EACN,KAAMF,CACP,CAAC,CACF,CAAC,CACF,EAGMG,EAAuB,IAAY,CACxC,GAAInB,EAAa,OAAS,EAAG,OAE7B,IAAMoB,EAAa,MAAM,KAAKpB,EAAa,OAAO,CAAC,EAAE,KAAK,CAACqB,EAAG,IAAMA,EAAE,KAAK,cAAc,EAAE,IAAI,CAAC,EAE1FC,EAAmBtC,EAAK,QAAQe,EAAO,KAAMN,CAAU,EACvD8B,EAAevC,EAAK,QAAQsC,CAAgB,EAE5CE,EAAkB,CAAC,EACzBA,EAAM,KAAK,sBAAsB,EACjCA,EAAM,KAAK,uBAAuB,EAClCA,EAAM,KAAK,gBAAgB,EAC3BA,EAAM,KAAK,iDAAiD,EAC5DA,EAAM,KAAK,mCAAmC,EAC9CA,EAAM,KAAK,mCAAmC,EAC9CA,EAAM,KAAK,EAAE,EACbA,EAAM,KAAK,iCAAiC,EAC5CA,EAAM,KAAK,EAAE,EAGbJ,EAAW,QAAQ,CAAC,CAAE,KAAAhB,EAAM,KAAAqB,CAAK,IAAM,CACtC,IAAMR,EAAehC,EAAMD,EAAK,SAASuC,EAAcE,CAAI,CAAC,EACtDC,EAAaT,EAAa,WAAW,GAAG,EAAIA,EAAe,KAAKA,CAAY,GAClFO,EAAM,KAAK,UAAUpB,CAAI,UAAUsB,CAAU,IAAI,EACjDF,EAAM,KAAK,YAAYpB,CAAI,KAAK,EAChCoB,EAAM,KAAK,eAAepB,CAAI,kCAAkCA,CAAI,IAAI,CACzE,CAAC,EAEDoB,EAAM,KAAK,EAAE,EACbA,EAAM,KAAK,yDAAiB,EAC5BA,EAAM,KAAK,sDAAsD,EAEjEJ,EAAW,QAAQ,CAAC,CAAE,KAAAhB,CAAK,IAAM,CAChCoB,EAAM,KAAK,kBAAkBpB,CAAI,UAAUA,CAAI,IAAI,CACpD,CAAC,EAEDoB,EAAM,KAAK,GAAG,EACdA,EAAM,KAAK,EAAE,EAEb,IAAMG,EAAO,GAAGH,EAAM,KAAK;AAAA,CAAI,CAAC;AAAA,EAE1BI,EAAe7C,EAAG,WAAWuC,CAAgB,EAAIvC,EAAG,aAAauC,EAAkB,OAAO,EAAI,GAEhGK,IAASC,GACZ7C,EAAG,cAAcuC,EAAkBK,EAAM,OAAO,CAElD,EAGME,EAAc,IAAY,CAC/B,GAAI,CAACnC,GAAOM,EAAa,OAAS,EAAG,OAErC,IAAMoB,EAAa,MAAM,KAAKpB,EAAa,OAAO,CAAC,EAAE,KAAK,CAACqB,EAAG,IAAMA,EAAE,KAAK,cAAc,EAAE,IAAI,CAAC,EAE1FS,EAAc9C,EAAK,QAAQe,EAAO,KAAMJ,CAAO,EAC/CoC,EAAS/C,EAAK,QAAQ8C,CAAW,EAGjCN,EAAkB,CAAC,EACzBA,EAAM,KAAK,iCAAiC,EAC5CA,EAAM,KAAK,iDAAiD,EAC5DA,EAAM,KAAK,mCAAmC,EAC9CA,EAAM,KAAK,mCAAmC,EAC9CA,EAAM,KAAK,EAAE,EACbA,EAAM,KAAK,6BAA6B,EACxCA,EAAM,KAAK,EAAE,EACbA,EAAM,KAAK,+BAA+B,EAC1CA,EAAM,KAAK,sCAAsC,EACjDA,EAAM,KAAK,sCAAsC,EAEjDJ,EAAW,QAAQ,CAAC,CAAE,KAAAhB,EAAM,KAAAqB,CAAK,IAAM,CAEtC,IAAIR,EAAehC,EAAMD,EAAK,SAAS+C,EAAQN,CAAI,CAAC,EAGpDR,EAAeA,EAAa,QAAQ,mBAAoB,EAAE,EAG1D,IAAMS,EAAaT,EAAa,WAAW,GAAG,EAAIA,EAAe,KAAKA,CAAY,GAElFO,EAAM,KAAK,KAAKpB,CAAI,qBAAqBsB,CAAU,iBAAiB,CACrE,CAAC,EAEDF,EAAM,KAAK,IAAI,EACfA,EAAM,KAAK,GAAG,EACdA,EAAM,KAAK,EAAE,EACbA,EAAM,KAAK,YAAY,EAEvB,IAAMG,EAAO,GAAGH,EAAM,KAAK;AAAA,CAAI,CAAC;AAAA,EAG3BzC,EAAG,WAAWgD,CAAM,GACxBhD,EAAG,UAAUgD,EAAQ,CAAE,UAAW,EAAK,CAAC,EAIzC,IAAMH,EAAe7C,EAAG,WAAW+C,CAAW,EAAI/C,EAAG,aAAa+C,EAAa,OAAO,EAAI,GAEtFH,IAASC,GACZ7C,EAAG,cAAc+C,EAAaH,EAAM,OAAO,CAE7C,EAEA,MAAO,CACN,KAAM,yCACN,QAAS,OACT,eAAiBK,GAAyD,CAEzEjC,EAASiC,CACV,EACA,YAAmC,CAClClB,EAAe,EACfK,EAAqB,EACrBU,EAAY,CACb,EAEA,gBAAgBI,EAAuB,CACtC,IAAMlB,EAAU/B,EAAK,QAAQe,EAAO,KAAMP,CAAG,EAGzCT,EAAG,WAAWgC,CAAO,IACxBd,EAAUlB,EAAG,MAAMgC,EAAS,CAAE,UAAW,EAAK,EAAG,CAACmB,EAAWC,IAAa,CAGzE,GAFI,CAACA,GAEDA,EAAS,SAAS,OAAO,EAAG,OAGhC,IAAM9B,EAAMrB,EAAK,QAAQmD,CAAQ,EAAE,MAAM,CAAC,EACrCtC,EAAW,SAASQ,CAAG,IAE5BS,EAAe,EACfK,EAAqB,EACrBU,EAAY,EAGZI,EAAO,GAAG,KAAK,CAAE,KAAM,cAAe,KAAM,GAAI,CAAC,EAClD,CAAC,EAEH,EACA,UAAiC,CAE5BhC,IACHA,EAAQ,MAAM,EACdA,EAAU,KAEZ,CACD,CACD,CCxRA,OAAOmC,MAAQ,KACf,OAAOC,MAAU,OAOjB,SAASC,EAAWC,EAAqB,CACxC,OAAOA,EAAI,QAAQ,YAAa,CAACC,EAAGC,IAAOA,EAAIA,EAAE,YAAY,EAAI,EAAG,EAAE,QAAQ,MAAQA,GAAMA,EAAE,YAAY,CAAC,CAC5G,CAKA,SAASC,EAAqBC,EAAoC,CAEjE,IAAMC,EAAqB,kDACrBC,EAAqBF,EAAY,MAAMC,CAAkB,EAC/D,OAAOC,EAAqBA,EAAmB,CAAC,EAAI,IACrD,CAMA,SAASC,GAAgBC,EAAkC,CAAC,EAAW,CACtE,GAAM,CAAE,IAAAC,EAAM,YAAa,WAAAC,EAAa,wBAAyB,KAAAC,EAAO,GAAM,WAAAC,EAAa,CAAC,MAAO,MAAO,KAAK,EAAG,UAAAC,CAAU,EAAIL,EAE5HM,EACAC,EAA+B,KAG7BC,EAAc,CAACC,EAAiBC,EAAqB,CAAC,KACtDrB,EAAG,WAAWoB,CAAO,GAIZpB,EAAG,YAAYoB,CAAO,EAC9B,QAASE,GAAS,CACvB,IAAMC,EAAWtB,EAAK,KAAKmB,EAASE,CAAI,EAGxC,GAFatB,EAAG,SAASuB,CAAQ,EAExB,YAAY,EAChBT,GACHK,EAAYI,EAAUF,CAAQ,MAEzB,CACN,IAAMG,EAAMvB,EAAK,QAAQsB,CAAQ,EAAE,MAAM,CAAC,EACtCR,EAAW,SAASS,CAAG,GAC1BH,EAAS,KAAKE,CAAQ,CAExB,CACD,CAAC,EAEMF,GAIFI,EAAsB,IAAY,CACvC,IAAMC,EAAYzB,EAAK,QAAQgB,EAAO,KAAML,CAAG,EAGzCe,EAFQR,EAAYO,CAAS,EAEe,OAAO,CAACE,EAAKL,IAAa,CAC3E,GAAI,CACH,IAAMM,EAAU7B,EAAG,aAAauB,EAAU,OAAO,EAC3CO,EAAgBxB,EAAqBuB,CAAO,EAG5CE,EAAe,IAAI9B,EAAK,SAASgB,EAAO,KAAMM,CAAQ,EAAE,QAAQ,MAAO,GAAG,CAAC,GAG7ES,EACJ,GAAIF,EACHE,EAAYF,MACN,CACN,IAAMG,EAAWhC,EAAK,SAASsB,EAAUtB,EAAK,QAAQsB,CAAQ,CAAC,EAC/DS,EAAYhB,EAAYA,EAAUiB,CAAQ,EAAI/B,EAAW+B,CAAQ,CAClE,CAEAL,EAAIG,CAAY,EAAIC,CACrB,OAASE,EAAO,CACf,QAAQ,MAAM,yBAAyBX,CAAQ,IAAKW,CAAK,CAC1D,CACA,OAAON,CACR,EAAG,CAAC,CAAC,EAGCO,EAAalC,EAAK,QAAQgB,EAAO,KAAMJ,CAAU,EACjDuB,EAAYnC,EAAK,QAAQkC,CAAU,EAGpCnC,EAAG,WAAWoC,CAAS,GAC3BpC,EAAG,UAAUoC,EAAW,CAAE,UAAW,EAAK,CAAC,EAG5C,IAAMC,EAAgB,KAAK,UAAUV,EAAa,KAAM,CAAC,EACzD3B,EAAG,cAAcmC,EAAYE,EAAe,OAAO,CACpD,EAEA,MAAO,CACN,KAAM,+BACN,QAAS,OACT,eAAiBC,GAAyD,CAEzErB,EAASqB,CACV,EACA,YAAmC,CAClCb,EAAoB,CACrB,EAEA,gBAAgBc,EAAuB,CACtC,IAAMC,EAAUvC,EAAK,QAAQgB,EAAO,KAAML,CAAG,EAGzCZ,EAAG,WAAWwC,CAAO,IACxBtB,EAAUlB,EAAG,MAAMwC,EAAS,CAAE,UAAW,EAAK,EAAG,CAACC,EAAWC,IAAa,CAGzE,GAFI,CAACA,GAEDA,EAAS,SAAS,OAAO,GAAKA,EAAS,SAAS,OAAO,EAAG,OAG9D,IAAMlB,EAAMvB,EAAK,QAAQyC,CAAQ,EAAE,MAAM,CAAC,EACrC3B,EAAW,SAASS,CAAG,IAE5BC,EAAoB,EAGpBc,EAAO,GAAG,KAAK,CAAE,KAAM,cAAe,KAAM,GAAI,CAAC,EAClD,CAAC,EAEH,EACA,UAAiC,CAE5BrB,IACHA,EAAQ,MAAM,EACdA,EAAU,KAEZ,CACD,CACD,CC5IA,OAAOyB,MAAQ,KACf,OAAOC,MAAU,OAGjB,SAASC,EAAQC,EAAaC,EAAS,EAAW,CACjD,OAAOD,EAAI,SAAS,EAAE,SAASC,EAAQ,GAAG,CAC3C,CAEA,SAASC,EAAWC,EAAoB,CACvC,IAAMC,EAAOD,EAAK,eAAe,EAC3BE,EAAQN,EAAQI,EAAK,YAAY,EAAI,CAAC,EACtCG,EAAMP,EAAQI,EAAK,WAAW,CAAC,EAC/BI,EAAQR,EAAQI,EAAK,YAAY,CAAC,EAClCK,EAAUT,EAAQI,EAAK,cAAc,CAAC,EACtCM,EAAUV,EAAQI,EAAK,cAAc,CAAC,EACtCO,EAAeX,EAAQI,EAAK,mBAAmB,EAAG,CAAC,EAEzD,MAAO,KAAKC,CAAI,IAAIC,CAAK,IAAIC,CAAG,IAAIC,CAAK,IAAIC,CAAO,IAAIC,CAAO,IAAIC,CAAY,EAChF,CAOA,SAASC,GAAoBC,EAAyB,CACrD,IAAIC,EAEJ,MAAO,CACN,KAAM,kCACN,eAAiBC,GAAyD,CAEzED,EAASC,CACV,EACA,YAAmC,CAGlC,IAAMC,EAAWb,EAFD,IAAI,IAEe,EAE7Bc,EAAaH,EAAO,UACpBI,EAAcnB,EAAK,KAAKkB,EAAY,cAAc,EACnDnB,EAAG,WAAWmB,CAAU,GAC5BnB,EAAG,UAAUmB,CAAU,EAIxB,IAAME,EAAU,KAAK,UAAU,CAAE,QAAS,IAAIN,CAAO,GAAI,SAAAG,CAAS,EAAG,KAAM,CAAC,EAC5ElB,EAAG,cAAcoB,EAAaC,CAAO,EAErC,IAAMC,EAAUrB,EAAK,KAAKe,EAAO,KAAM,cAAc,EACrD,GAAIhB,EAAG,WAAWsB,CAAO,EAAG,CAC3B,IAAMC,EAAU,KAAK,MAAMvB,EAAG,aAAasB,EAAS,OAAO,CAAC,EAC5DC,EAAQ,QAAUR,EAClBf,EAAG,cAAcsB,EAAS,KAAK,UAAUC,EAAS,KAAM,CAAC,EAAG,OAAO,CACpE,CACD,CACD,CACD","names":["fs","path","findSvgFile","dir","svgContents","file","iconName","svgContent","match","attr","viewBoxMatch","widthMatch","heightMatch","width","height","viewBoxContent","b","writeTSXIcon","componentName","iconDir","componentContent","line","buildSvgIcon","writeDir","config","resolvedConfig","svgFiles","iconsPath","iconImportContent","iconTypeContent","exportContent","svg","idx","fs","path","externalGlobals","viteExternalsPlugin","isDev","getModuleVersion","name","pwd","pkgFile","isFullPath","renderUrl","url","data","getModuleInfo","module","prodUrl","v","version","pathList","p","css","cssList","c","cdnJsDelivrUrl","cdnUnpkgUrl","cdnImport","options","modules","enableInDevMode","generateCssLinkTag","generateScriptTag","isBuild","externalMap","alias","plugins","_","command","userConfig","html","descriptors","cusomize","attrs","fs","path","slash","pascalCase","str","_","c","componentAutoImport","options","dir","exportPath","dts","dtsPath","deep","extensions","formatter","config","componentMap","watcher","getNameFromPath","filePath","name","ext","parts","scanDirectory","dirPath","depth","files","entries","entry","fullPath","scanComponents","fullDir","absolutePath","relativePath","componentName","generateAutoRegister","components","a","registerFilePath","componentDir","lines","from","importPath","code","existingCode","generateDts","dtsFullPath","dtsDir","resolvedConfig","server","eventType","filename","fs","path","pascalCase","str","_","c","extractComponentName","fileContent","defineOptionsRegex","defineOptionsMatch","buildRouterPath","options","dir","exportPath","deep","extensions","formatter","config","watcher","getAllFiles","dirPath","fileList","file","filePath","ext","generatePathNameMap","targetDir","pathNameMap","acc","content","componentName","relativePath","finalName","fileName","error","outputPath","outputDir","outputContent","resolvedConfig","server","fullDir","eventType","filename","fs","path","padZero","num","length","formatDate","date","year","month","day","hours","minutes","seconds","milliseconds","versionUpdatePlugin","version","config","resolvedConfig","dateTime","versionDir","versionPath","content","pkgPath","pkgJson"]}