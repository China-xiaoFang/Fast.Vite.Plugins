"use strict";var V=Object.create;var T=Object.defineProperty;var z=Object.getOwnPropertyDescriptor;var Y=Object.getOwnPropertyNames;var Z=Object.getPrototypeOf,X=Object.prototype.hasOwnProperty;var q=(t,e)=>{for(var o in e)T(t,o,{get:e[o],enumerable:!0})},R=(t,e,o,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Y(e))!X.call(t,s)&&s!==o&&T(t,s,{get:()=>e[s],enumerable:!(r=z(e,s))||r.enumerable});return t};var w=(t,e,o)=>(o=t!=null?V(Z(t)):{},R(e||!t||!t.__esModule?T(o,"default",{value:t,enumerable:!0}):o,t)),K=t=>R(T({},"__esModule",{value:!0}),t);var pt={};q(pt,{buildSvgIcon:()=>Q,cdnImport:()=>st,cdnJsDelivrUrl:()=>G,cdnUnpkgUrl:()=>ot,componentAutoImport:()=>it,findSvgFile:()=>U,versionUpdatePlugin:()=>at,writeTSXIcon:()=>O});module.exports=K(pt);var b=w(require("fs"),1),D=w(require("path"),1),U=t=>{let e=[];return b.default.readdirSync(t,{withFileTypes:!0}).forEach(r=>{if(r.isDirectory())e.push(...U(D.default.join(t,r.name)));else{let s=r.name.replace(".svg",""),f=b.default.readFileSync(D.default.join(t,r.name),"utf-8").replace(/<\?xml.*?\?>/,"").replace(/<!DOCTYPE svg.*?>/,"").trimStart().trimEnd().replace(/<svg([^>+].*?)>/,(p,u)=>{let i=u.match(/viewBox="[^"]+"/),v=u.match(/width="(\d+)"/),l=u.match(/height="(\d+)"/),C=1024,h=1024;v&&(C=v[0]),l&&(h=l[0]);let S="";return i?S=i[0]:S=`viewBox="0 0 ${C} ${h}"`,`<svg xmlns="http://www.w3.org/2000/svg" ${S}>`});e.push({iconName:s,componentName:s.charAt(0).toUpperCase()+s.slice(1),iconContent:f})}}),e.sort((r,s)=>r.iconName<s.iconName?-1:r.iconName>s.iconName?1:0)},O=(t,e,o)=>{b.default.mkdirSync(e,{recursive:!0});let r=`import { defineComponent } from "vue";

/**
 * ${t} \u56FE\u6807\u7EC4\u4EF6
 */
export const ${t} = defineComponent({
	name: "${t}",
	render() {
		return (
${o.split(`
`).map(s=>`			${s}`).join(`
`)}
		);
	},
});

export default ${t};
`;b.default.writeFileSync(D.default.join(e,"index.tsx"),r)};function Q(t,e){if(!t||!e)return;let o;return{name:"fast-vite-plugin-build-svg-icon",configResolved:r=>{o=r},buildStart(){let r=U(D.default.resolve(o.root,t)),s=D.default.resolve(o.root,e);b.default.mkdirSync(s,{recursive:!0});let f="",p="",u="";r.forEach((i,v)=>{O(i.componentName,D.default.join(s,i.iconName),i.iconContent),f+=`import { ${i.componentName} } from "./${i.iconName}";
`,p+=`	${i.componentName},`,u+=`export * from "./${i.iconName}";
`,v+1<r.length&&(p+=`
`)}),b.default.writeFileSync(D.default.join(s,"index.ts"),`import type { DefineComponent } from "vue";
${f}
${u}
export default [
${p}
] as unknown as DefineComponent[];
`)}}}var M=w(require("fs"),1),J=w(require("path"),1),L=w(require("rollup-plugin-external-globals"),1),_=require("vite-plugin-externals"),tt=process.env.NODE_ENV==="development";function et(t){let e=process.cwd(),o=J.default.join(e,"node_modules",t,"package.json");return M.default.existsSync(o)?JSON.parse(M.default.readFileSync(o,"utf8")).version:""}function B(t){return!!(t.startsWith("http:")||t.startsWith("https:")||t.startsWith("//"))}function W(t,e){let{path:o}=e;return B(o)&&(t=o),t.replace(/\{name\}/g,e.name).replace(/\{version\}/g,e.version).replace(/\{path\}/g,o)}function nt(t,e){e=t.prodUrl||e;let o=t,r=t.version||et(o.name),s=[];Array.isArray(o.path)?s=o.path:s.push(o.path);let f={...o,version:r};s=s.map(i=>{if(!r&&!B(i))throw new Error(`modules: ${f.name} package.json file does not exist`);return W(e,{name:f.name,version:f.version,path:i})});let p=o.css||[];!Array.isArray(p)&&p&&(p=[p]);let u=Array.isArray(p)?p.map(i=>W(e,{name:f.name,version:f.version,path:i})):[];return{...o,version:r,pathList:s,cssList:u}}var G="https://cdn.jsdelivr.net/npm/{name}@{version}/{path}",ot="https://unpkg.com/{package}@{version}/{path}";function st(t){let{modules:e=[],prodUrl:o=G,enableInDevMode:r=!1,generateCssLinkTag:s,generateScriptTag:f}=t,p=!1,u=(Array.isArray(e)?e:[e]).map(l=>typeof l=="function"?l(o):l).map(l=>nt(l,o)),i={};u.forEach(l=>{i[l.name]=l.var,Array.isArray(l.alias)&&l.alias.forEach(C=>{i[C]=l.var})});let v=[{name:"fast-vite-plugin-cdn-import",enforce:"pre",config(l,{command:C}){p=C==="build";let h={build:{rollupOptions:{plugins:[]}}};return p&&(h.build.rollupOptions.plugins=[(0,L.default)(i)]),h},transformIndexHtml(l){if(!p&&!r)return l;let C=[];return u.forEach(h=>{h.pathList.forEach(S=>{let P=f?.(h.name,S)||{},N={src:S,crossorigin:"anonymous",...h?.attrs??{},...P.attrs};C.push({tag:"script",attrs:N,...P})}),h.cssList.forEach(S=>{let P=s?.(h.name,S)||{},N={href:S,rel:"stylesheet",crossorigin:"anonymous",...h?.attrs??{},...P.attrs};C.push({tag:"link",attrs:N,...P})})}),C}}];return tt&&r&&v.push((0,_.viteExternalsPlugin)(i,{enforce:"pre"})),v}var y=w(require("fs"),1),x=w(require("path"),1);function H(t){return t.replace(/\\/g,"/")}function rt(t){return t.replace(/[-_](\w)/g,(e,o)=>o?o.toUpperCase():"").replace(/^\w/,e=>e.toUpperCase())}function it(t={}){let{dir:e="src/components",exportPath:o="src/components/index.ts",dts:r=!0,dtsPath:s="types/component.d.ts",deep:f=!0,extensions:p=["vue","tsx","jsx"],formatter:u}=t,i,v=new Map,l=null,C=m=>{let c=m;for(let a of p)if(c.endsWith(`.${a}`)){c=c.slice(0,-a.length-1);break}if(c.endsWith("/index")||c.endsWith("\\index")){let a=c.split(/[\\/]/);c=a[a.length-2]||a[a.length-1]}else{let a=c.split(/[\\/]/);c=a[a.length-1]}return u?u(c):rt(c)},h=(m,c=0)=>{let a=[];if(!y.default.existsSync(m))return a;let n=y.default.readdirSync(m,{withFileTypes:!0});for(let g of n){let j=x.default.join(m,g.name);if(g.isDirectory()){if(g.name==="node_modules"||g.name.startsWith(". "))continue;(f||c===0)&&a.push(...h(j,c+1))}else if(g.isFile()){let d=x.default.extname(g.name).slice(1);p.includes(d)&&a.push(j)}}return a},S=()=>{v.clear();let m=x.default.resolve(i.root,e);if(!y.default.existsSync(m)){console.warn(`[component-auto-import] Directory not found: ${m}`);return}h(m).forEach(a=>{let n=x.default.relative(m,a),g=C(n);v.set(g,{name:g,from:a})})},P=()=>{if(v.size===0)return;let m=Array.from(v.values()).sort((d,F)=>d.name.localeCompare(F.name)),c=x.default.resolve(i.root,o),a=x.default.dirname(c),n=[];n.push("/* eslint-disable */"),n.push("/* prettier-ignore */"),n.push("// @ts-nocheck"),n.push("// Auto-generated by fast component-auto-import"),n.push("// Generated by fast-vite-plugins"),n.push("// Do not edit this file manually"),n.push(""),n.push('import type { App } from "vue";'),n.push(""),m.forEach(({name:d,from:F})=>{let $=H(x.default.relative(a,F)),E=$.startsWith(".")?$:`./${$}`;n.push(`import ${d} from "${E}";`),n.push(`export { ${d} };`),n.push(`export type ${d}Instance = InstanceType<typeof ${d}>;`)}),n.push(""),n.push("/** \u81EA\u52A8\u6CE8\u518C\u6240\u6709\u7EC4\u4EF6 */"),n.push("export function registerComponents(app: App): void {"),m.forEach(({name:d})=>{n.push(`	app.component(${d}.name, ${d});`)}),n.push("}"),n.push("");let g=`${n.join(`
`)}
`,j=y.default.existsSync(c)?y.default.readFileSync(c,"utf-8"):"";g!==j&&y.default.writeFileSync(c,g,"utf-8")},N=()=>{if(!r||v.size===0)return;let m=Array.from(v.values()).sort((d,F)=>d.name.localeCompare(F.name)),c=x.default.resolve(i.root,s),a=x.default.dirname(c),n=[];n.push("// For this project development"),n.push("// Auto-generated by fast component-auto-import"),n.push("// Generated by fast-vite-plugins"),n.push("// Do not edit this file manually"),n.push(""),n.push('import "@vue/runtime-core";'),n.push(""),n.push("// GlobalComponents for Volar"),n.push('declare module "@vue/runtime-core" {'),n.push("	export interface GlobalComponents {"),m.forEach(({name:d,from:F})=>{let $=H(x.default.relative(a,F));$=$.replace(/\.(vue|tsx|jsx)$/,"");let E=$.startsWith(".")?$:`./${$}`;n.push(`		${d}: (typeof import("${E}"))["default"];`)}),n.push("	}"),n.push("}"),n.push(""),n.push("export {};");let g=`${n.join(`
`)}
`;y.default.existsSync(a)||y.default.mkdirSync(a,{recursive:!0});let j=y.default.existsSync(c)?y.default.readFileSync(c,"utf-8"):"";g!==j&&y.default.writeFileSync(c,g,"utf-8")};return{name:"fast-vite-plugin-component-auto-import",enforce:"post",configResolved:m=>{i=m},buildStart(){S(),P(),N()},configureServer(m){let c=x.default.resolve(i.root,e);y.default.existsSync(c)&&(l=y.default.watch(c,{recursive:!0},(a,n)=>{if(!n||n.endsWith(".d.ts"))return;let g=x.default.extname(n).slice(1);p.includes(g)&&(S(),P(),N(),m.ws.send({type:"full-reload",path:"*"}))}))},buildEnd(){l&&(l.close(),l=null)}}}var A=w(require("fs"),1),I=w(require("path"),1);function k(t,e=2){return t.toString().padStart(e,"0")}function ct(t){let e=t.getUTCFullYear(),o=k(t.getUTCMonth()+1),r=k(t.getUTCDate()),s=k(t.getUTCHours()),f=k(t.getUTCMinutes()),p=k(t.getUTCSeconds()),u=k(t.getUTCMilliseconds(),3);return`Z ${e}-${o}-${r} ${s}:${f}:${p}.${u}`}function at(t){let e;return{name:"fast-vite-plugin-version-update",configResolved:o=>{e=o},buildStart(){let r=ct(new Date),s=e.publicDir,f=I.default.join(s,"version.json");A.default.existsSync(s)||A.default.mkdirSync(s);let p=JSON.stringify({version:`v${t}`,dateTime:r},null,4);A.default.writeFileSync(f,p);let u=I.default.join(e.base,"package.json");if(A.default.existsSync(u)){let i=JSON.parse(A.default.readFileSync(u,"utf-8"));i.version=t,A.default.writeFileSync(u,JSON.stringify(i,null,2),"utf-8")}}}}0&&(module.exports={buildSvgIcon,cdnImport,cdnJsDelivrUrl,cdnUnpkgUrl,componentAutoImport,findSvgFile,versionUpdatePlugin,writeTSXIcon});
//# sourceMappingURL=index.cjs.map