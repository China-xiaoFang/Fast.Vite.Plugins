{"version":3,"sources":["../../src/index.ts","../../src/buildSvgIcon/index.ts","../../src/cdnImport/index.ts","../../src/componentAutoImport/index.ts","../../src/routerPath/index.ts","../../src/versionUpdate/index.ts"],"sourcesContent":["export * from \"./buildSvgIcon\";\nexport * from \"./cdnImport\";\nexport * from \"./cdnImport/type\";\nexport * from \"./componentAutoImport\";\nexport * from \"./componentAutoImport/type\";\nexport * from \"./routerPath\";\nexport * from \"./routerPath/type\";\nexport * from \"./versionUpdate\";\n","import fs from \"fs\";\nimport path from \"path\";\nimport type { Plugin, ResolvedConfig, ViteDevServer } from \"vite\";\n\n/**\n * 查找 svg 文件\n */\n\nconst findSvgFile = (dir: string): { iconName: string; componentName: string; iconContent: string }[] => {\n\t// svg 内容\n\tconst svgContents: { iconName: string; componentName: string; iconContent: string }[] = [];\n\t// 获取当前目录下的文件\n\tconst svgFiles = fs.readdirSync(dir, {\n\t\twithFileTypes: true,\n\t});\n\n\tsvgFiles.forEach((file) => {\n\t\tif (file.isDirectory()) {\n\t\t\tsvgContents.push(...findSvgFile(path.join(dir, file.name)));\n\t\t} else {\n\t\t\tconst iconName = file.name.replace(\".svg\", \"\");\n\n\t\t\tconst svgContent = fs\n\t\t\t\t.readFileSync(path.join(dir, file.name), \"utf-8\")\n\t\t\t\t.replace(/<\\?xml.*?\\?>/, \"\")\n\t\t\t\t.replace(/<!DOCTYPE svg.*?>/, \"\")\n\t\t\t\t// .replace(/(\\r)|(\\n)/g, \"\")\n\t\t\t\t.trimStart()\n\t\t\t\t.trimEnd()\n\t\t\t\t// .replace(/(fill=\"[^>+].*?\")/g, 'fill=\"\"')\n\t\t\t\t.replace(/<svg([^>+].*?)>/, (match, attr) => {\n\t\t\t\t\tconst viewBoxMatch = attr.match(/viewBox=\"[^\"]+\"/);\n\t\t\t\t\tconst widthMatch = attr.match(/width=\"(\\d+)\"/);\n\t\t\t\t\tconst heightMatch = attr.match(/height=\"(\\d+)\"/);\n\t\t\t\t\tlet width = 1024;\n\t\t\t\t\tlet height = 1024;\n\t\t\t\t\tif (widthMatch) {\n\t\t\t\t\t\twidth = widthMatch[0];\n\t\t\t\t\t}\n\t\t\t\t\tif (heightMatch) {\n\t\t\t\t\t\theight = heightMatch[0];\n\t\t\t\t\t}\n\t\t\t\t\tlet viewBoxContent = \"\";\n\t\t\t\t\tif (!viewBoxMatch) {\n\t\t\t\t\t\tviewBoxContent = `viewBox=\"0 0 ${width} ${height}\"`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tviewBoxContent = viewBoxMatch[0];\n\t\t\t\t\t}\n\t\t\t\t\treturn `<svg xmlns=\"http://www.w3.org/2000/svg\" ${viewBoxContent}>`;\n\t\t\t\t});\n\n\t\t\tsvgContents.push({\n\t\t\t\t// iconName: iconName.charAt(0).toUpperCase() + iconName.slice(1),\n\t\t\t\ticonName,\n\t\t\t\tcomponentName: iconName.charAt(0).toUpperCase() + iconName.slice(1),\n\t\t\t\ticonContent: svgContent,\n\t\t\t});\n\t\t}\n\t});\n\n\treturn svgContents.sort((a, b) => {\n\t\tif (a.iconName < b.iconName) {\n\t\t\treturn -1;\n\t\t}\n\t\tif (a.iconName > b.iconName) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t});\n};\n\n/**\n * 写入 TSX  图标\n */\nconst writeTSXIcon = (componentName: string, iconDir: string, svgContent: string): void => {\n\tfs.mkdirSync(iconDir, { recursive: true });\n\n\tconst componentContent = `import { defineComponent } from \"vue\";\n\n/**\n * ${componentName} 图标组件\n */\nexport const ${componentName} = defineComponent({\n\tname: \"${componentName}\",\n\trender() {\n\t\treturn (\n${svgContent\n\t.split(\"\\n\")\n\t.map((line) => `\t\t\t${line}`)\n\t.join(\"\\n\")}\n\t\t);\n\t},\n});\n\nexport default ${componentName};\n`;\n\n\tfs.writeFileSync(path.join(iconDir, \"index.tsx\"), componentContent);\n};\n\n/**\n * 构建 svg 图标组件\n * @param dir svg 文件路径\n * @param writeDir 写入的文件路径 相对的即可\n */\nfunction buildSvgIcon(dir: string, writeDir: string): Plugin {\n\tif (!dir || !writeDir) return;\n\n\tlet config: ResolvedConfig;\n\n\tconst rebuild = (): void => {\n\t\tconst svgFiles = findSvgFile(path.resolve(config.root, dir));\n\n\t\tconst iconsPath = path.resolve(config.root, writeDir);\n\t\tfs.mkdirSync(iconsPath, { recursive: true });\n\n\t\tlet iconImportContent = \"\";\n\t\tlet iconTypeContent = \"\";\n\t\tlet exportContent = \"\";\n\n\t\tsvgFiles.forEach((svg, idx) => {\n\t\t\twriteTSXIcon(svg.componentName, path.join(iconsPath, svg.iconName), svg.iconContent);\n\n\t\t\ticonImportContent += `import { ${svg.componentName} } from \"./${svg.iconName}\";\n`;\n\n\t\t\ticonTypeContent += `\t${svg.componentName},`;\n\n\t\t\texportContent += `export * from \"./${svg.iconName}\";\n`;\n\n\t\t\tif (idx + 1 < svgFiles.length) {\n\t\t\t\ticonTypeContent += \"\\n\";\n\t\t\t}\n\t\t});\n\n\t\tfs.writeFileSync(\n\t\t\tpath.join(iconsPath, \"index.ts\"),\n\t\t\t`import type { DefineComponent } from \"vue\";\n${iconImportContent}\n${exportContent}\nexport default [\n${iconTypeContent}\n] as unknown as DefineComponent[];\n`\n\t\t);\n\t};\n\n\treturn {\n\t\tname: \"fast-vite-plugin-build-svg-icon\",\n\t\tconfigResolved: (resolvedConfig: ResolvedConfig): void | Promise<void> => {\n\t\t\t// 存储最终解析的配置\n\t\t\tconfig = resolvedConfig;\n\t\t},\n\t\tbuildStart(): void | Promise<void> {\n\t\t\trebuild();\n\t\t},\n\t\t// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n\t\tconfigureServer(server: ViteDevServer) {\n\t\t\tconst fullDir = path.resolve(config.root, dir);\n\n\t\t\t// 监听文件变化\n\t\t\tif (fs.existsSync(fullDir)) {\n\t\t\t\tserver.watcher.add(fullDir);\n\n\t\t\t\tconst handle = (file: string): void => {\n\t\t\t\t\tif (!file) return;\n\t\t\t\t\tif (!file.endsWith(\".svg\")) return;\n\n\t\t\t\t\trebuild();\n\t\t\t\t};\n\n\t\t\t\tserver.watcher.on(\"add\", handle);\n\t\t\t\tserver.watcher.on(\"change\", handle);\n\t\t\t\tserver.watcher.on(\"unlink\", handle);\n\t\t\t}\n\t\t},\n\t};\n}\n\nexport { findSvgFile, writeTSXIcon, buildSvgIcon };\n","import fs from \"fs\";\nimport path from \"path\";\nimport externalGlobals from \"rollup-plugin-external-globals\";\nimport { viteExternalsPlugin } from \"vite-plugin-externals\";\nimport type { CdnImportOptions, Module } from \"./type\";\nimport type { HtmlTagDescriptor, Plugin, UserConfig } from \"vite\";\n\nconst isDev = process.env.NODE_ENV === \"development\";\n\n/**\n * get npm module version\n * @param name\n * @returns\n */\nfunction getModuleVersion(name: string): string {\n\tconst pwd = process.cwd();\n\tconst pkgFile = path.join(pwd, \"node_modules\", name, \"package.json\");\n\tif (fs.existsSync(pkgFile)) {\n\t\tconst pkgJson = JSON.parse(fs.readFileSync(pkgFile, \"utf8\"));\n\t\treturn pkgJson.version;\n\t}\n\n\treturn \"\";\n}\n\n/**\n * 是否完整的 url\n * @param path\n * @returns\n */\nfunction isFullPath(path: string): boolean {\n\treturn path.startsWith(\"http:\") || path.startsWith(\"https:\") || path.startsWith(\"//\") ? true : false;\n}\n\nfunction renderUrl(\n\turl: string,\n\tdata: {\n\t\tname: string;\n\t\tversion: string;\n\t\tpath: string;\n\t}\n): string {\n\tconst { path } = data;\n\tif (isFullPath(path)) {\n\t\turl = path;\n\t}\n\treturn url\n\t\t.replace(/\\{name\\}/g, data.name)\n\t\t.replace(/\\{version\\}/g, data.version)\n\t\t.replace(/\\{path\\}/g, path);\n}\n\nfunction getModuleInfo(module: Module, prodUrl: string): Module & { pathList?: string[]; cssList?: string[] } {\n\tprodUrl = module.prodUrl || prodUrl;\n\tconst v = module;\n\tconst version = module.version || getModuleVersion(v.name);\n\tlet pathList: string[] = [];\n\tif (!Array.isArray(v.path)) {\n\t\tpathList.push(v.path);\n\t} else {\n\t\tpathList = v.path;\n\t}\n\n\tconst data = {\n\t\t...v,\n\t\tversion,\n\t};\n\n\tpathList = pathList.map((p) => {\n\t\tif (!version && !isFullPath(p)) {\n\t\t\tthrow new Error(`modules: ${data.name} package.json file does not exist`);\n\t\t}\n\t\treturn renderUrl(prodUrl, {\n\t\t\tname: data.name,\n\t\t\tversion: data.version,\n\t\t\tpath: p,\n\t\t});\n\t});\n\n\tlet css = v.css || [];\n\tif (!Array.isArray(css) && css) {\n\t\tcss = [css];\n\t}\n\n\tconst cssList = !Array.isArray(css)\n\t\t? []\n\t\t: css.map((c) =>\n\t\t\t\trenderUrl(prodUrl, {\n\t\t\t\t\tname: data.name,\n\t\t\t\t\tversion: data.version,\n\t\t\t\t\tpath: c,\n\t\t\t\t})\n\t\t\t);\n\n\treturn {\n\t\t...v,\n\t\tversion,\n\t\tpathList,\n\t\tcssList,\n\t};\n}\n\nconst cdnJsDelivrUrl = \"https://cdn.jsdelivr.net/npm/{name}@{version}/{path}\";\nconst cdnUnpkgUrl = \"https://unpkg.com/{package}@{version}/{path}\";\n\n/**\n * CDN 导入\n * @param options\n * @returns\n */\nfunction cdnImport(options: CdnImportOptions): Plugin[] {\n\tconst { modules = [], prodUrl = cdnJsDelivrUrl, enableInDevMode = false, generateCssLinkTag, generateScriptTag } = options;\n\n\tlet isBuild = false;\n\n\tconst data = (Array.isArray(modules) ? modules : [modules])\n\t\t.map((v) => (typeof v === \"function\" ? v(prodUrl) : v))\n\t\t.map((v) => getModuleInfo(v, prodUrl));\n\n\tconst externalMap: {\n\t\t[name: string]: string;\n\t} = {};\n\n\tdata.forEach((v) => {\n\t\texternalMap[v.name] = v.var;\n\t\tif (Array.isArray(v.alias)) {\n\t\t\tv.alias.forEach((alias) => {\n\t\t\t\texternalMap[alias] = v.var;\n\t\t\t});\n\t\t}\n\t});\n\n\tconst plugins: Plugin[] = [\n\t\t{\n\t\t\tname: \"fast-vite-plugin-cdn-import\",\n\t\t\tenforce: \"pre\",\n\t\t\tconfig(_, { command }): UserConfig {\n\t\t\t\tisBuild = command === \"build\";\n\n\t\t\t\tconst userConfig: UserConfig = {\n\t\t\t\t\tbuild: {\n\t\t\t\t\t\trollupOptions: {\n\t\t\t\t\t\t\tplugins: [],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t\tif (isBuild) {\n\t\t\t\t\tuserConfig.build.rollupOptions.plugins = [externalGlobals(externalMap)];\n\t\t\t\t}\n\n\t\t\t\treturn userConfig;\n\t\t\t},\n\t\t\ttransformIndexHtml(html): string | HtmlTagDescriptor[] {\n\t\t\t\tif (!isBuild && !enableInDevMode) {\n\t\t\t\t\treturn html;\n\t\t\t\t}\n\n\t\t\t\tconst descriptors: HtmlTagDescriptor[] = [];\n\n\t\t\t\tdata.forEach((v) => {\n\t\t\t\t\tv.pathList.forEach((url) => {\n\t\t\t\t\t\tconst cusomize = generateScriptTag?.(v.name, url) || {};\n\t\t\t\t\t\tconst attrs = {\n\t\t\t\t\t\t\tsrc: url,\n\t\t\t\t\t\t\tcrossorigin: \"anonymous\",\n\t\t\t\t\t\t\t...(v?.attrs ?? {}),\n\t\t\t\t\t\t\t...cusomize.attrs,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tdescriptors.push({\n\t\t\t\t\t\t\ttag: \"script\",\n\t\t\t\t\t\t\tattrs,\n\t\t\t\t\t\t\t...cusomize,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\tv.cssList.forEach((url) => {\n\t\t\t\t\t\tconst cusomize = generateCssLinkTag?.(v.name, url) || {};\n\t\t\t\t\t\tconst attrs = {\n\t\t\t\t\t\t\thref: url,\n\t\t\t\t\t\t\trel: \"stylesheet\",\n\t\t\t\t\t\t\tcrossorigin: \"anonymous\",\n\t\t\t\t\t\t\t...(v?.attrs ?? {}),\n\t\t\t\t\t\t\t...cusomize.attrs,\n\t\t\t\t\t\t};\n\t\t\t\t\t\tdescriptors.push({\n\t\t\t\t\t\t\ttag: \"link\",\n\t\t\t\t\t\t\tattrs,\n\t\t\t\t\t\t\t...cusomize,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\treturn descriptors;\n\t\t\t},\n\t\t},\n\t];\n\n\tif (isDev && enableInDevMode) {\n\t\tplugins.push(\n\t\t\tviteExternalsPlugin(externalMap, {\n\t\t\t\tenforce: \"pre\",\n\t\t\t})\n\t\t);\n\t}\n\n\treturn plugins;\n}\n\nexport { cdnImport, cdnJsDelivrUrl, cdnUnpkgUrl };\n","import fs from \"fs\";\nimport path from \"path\";\nimport type { AutoImportOptions } from \"./type\";\nimport type { Plugin, ResolvedConfig, ViteDevServer } from \"vite\";\n\n/**\n * 将路径转换为 Unix 风格\n */\nfunction slash(path: string): string {\n\treturn path.replace(/\\\\/g, \"/\");\n}\n\n/**\n * Pascal Case 转换\n */\nfunction pascalCase(str: string): string {\n\treturn str.replace(/[-_](\\w)/g, (_, c) => (c ? c.toUpperCase() : \"\")).replace(/^\\w/, (c) => c.toUpperCase());\n}\n\n/**\n * 组件自动导入\n * @param options 选项\n */\nfunction componentAutoImport(options: AutoImportOptions = {}): Plugin {\n\tconst {\n\t\tdir = \"src/components\",\n\t\texportPath = \"src/components/index.ts\",\n\t\tdts = true,\n\t\tdtsPath = \"types/components.d.ts\",\n\t\tdeep = true,\n\t\textensions = [\"vue\", \"tsx\", \"jsx\"],\n\t\tformatter,\n\t} = options;\n\n\tlet config: ResolvedConfig;\n\tconst componentMap = new Map<\n\t\tstring,\n\t\t{\n\t\t\t/** 组件名称 (PascalCase) */\n\t\t\tname: string;\n\t\t\t/** 组件文件路径 (绝对路径) */\n\t\t\tfrom: string;\n\t\t}\n\t>();\n\n\t/** 从文件路径获取组件名 */\n\tconst getNameFromPath = (filePath: string): string => {\n\t\t// 移除扩展名\n\t\tlet name = filePath;\n\t\tfor (const ext of extensions) {\n\t\t\tif (name.endsWith(`.${ext}`)) {\n\t\t\t\tname = name.slice(0, -ext.length - 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// 如果是 index 文件，使用父目录名\n\t\tif (name.endsWith(\"/index\") || name.endsWith(\"\\\\index\")) {\n\t\t\tconst parts = name.split(/[\\\\/]/);\n\t\t\tname = parts[parts.length - 2] || parts[parts.length - 1];\n\t\t} else {\n\t\t\tconst parts = name.split(/[\\\\/]/);\n\t\t\tname = parts[parts.length - 1];\n\t\t}\n\n\t\tif (formatter) {\n\t\t\treturn formatter(name);\n\t\t} else {\n\t\t\treturn pascalCase(name);\n\t\t}\n\t};\n\n\t/** 递归扫描目录 */\n\tconst scanDirectory = (dirPath: string, depth = 0): string[] => {\n\t\tconst files: string[] = [];\n\n\t\tif (!fs.existsSync(dirPath)) {\n\t\t\treturn files;\n\t\t}\n\n\t\tconst entries = fs.readdirSync(dirPath, { withFileTypes: true });\n\n\t\tfor (const entry of entries) {\n\t\t\tconst fullPath = path.join(dirPath, entry.name);\n\n\t\t\tif (entry.isDirectory()) {\n\t\t\t\t// 跳过 node_modules 等\n\t\t\t\tif (entry.name === \"node_modules\" || entry.name.startsWith(\". \")) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// 深度扫描\n\t\t\t\tif (deep || depth === 0) {\n\t\t\t\t\tfiles.push(...scanDirectory(fullPath, depth + 1));\n\t\t\t\t}\n\t\t\t} else if (entry.isFile()) {\n\t\t\t\t// 检查文件扩展名\n\t\t\t\tconst ext = path.extname(entry.name).slice(1);\n\t\t\t\tif (extensions.includes(ext)) {\n\t\t\t\t\tfiles.push(fullPath);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn files;\n\t};\n\n\t/** 扫描组件文件 */\n\tconst scanComponents = (): void => {\n\t\tcomponentMap.clear();\n\n\t\tconst fullDir = path.resolve(config.root, dir);\n\n\t\tif (!fs.existsSync(fullDir)) {\n\t\t\tconsole.warn(`[component-auto-import] Directory not found: ${fullDir}`);\n\t\t\treturn;\n\t\t}\n\n\t\tconst files = scanDirectory(fullDir);\n\n\t\tfiles.forEach((absolutePath) => {\n\t\t\tconst relativePath = path.relative(fullDir, absolutePath);\n\t\t\tconst componentName = getNameFromPath(relativePath);\n\n\t\t\tcomponentMap.set(componentName, {\n\t\t\t\tname: componentName,\n\t\t\t\tfrom: absolutePath,\n\t\t\t});\n\t\t});\n\t};\n\n\t/** 生成自动注册文件 */\n\tconst generateAutoRegister = (): void => {\n\t\tif (componentMap.size === 0) return;\n\n\t\tconst components = Array.from(componentMap.values()).sort((a, b) => a.name.localeCompare(b.name));\n\n\t\tconst registerFilePath = path.resolve(config.root, exportPath);\n\t\tconst componentDir = path.dirname(registerFilePath);\n\n\t\tconst lines: string[] = [];\n\t\tlines.push(\"/* eslint-disable */\");\n\t\tlines.push(\"/* prettier-ignore */\");\n\t\tlines.push(\"// @ts-nocheck\");\n\t\tlines.push(\"// Auto-generated by fast component-auto-import\");\n\t\tlines.push(\"// Generated by fast-vite-plugins\");\n\t\tlines.push(\"// Do not edit this file manually\");\n\t\tlines.push(\"\");\n\t\tlines.push('import type { App } from \"vue\";');\n\t\tlines.push(\"\");\n\n\t\t// 生成 import 语句\n\t\tcomponents.forEach(({ name, from }) => {\n\t\t\tconst relativePath = slash(path.relative(componentDir, from));\n\t\t\tconst importPath = relativePath.startsWith(\".\") ? relativePath : `./${relativePath}`;\n\t\t\tlines.push(`import ${name} from \"${importPath}\";`);\n\t\t\tlines.push(`export { ${name} };`);\n\t\t\tlines.push(`export type ${name}Instance = InstanceType<typeof ${name}>;`);\n\t\t});\n\n\t\tlines.push(\"\");\n\t\tlines.push(\"/** 自动注册所有组件 */\");\n\t\tlines.push(\"export function registerComponents(app: App): void {\");\n\n\t\tcomponents.forEach(({ name }) => {\n\t\t\tlines.push(`\tapp.component(${name}.name, ${name});`);\n\t\t});\n\n\t\tlines.push(\"}\");\n\t\tlines.push(\"\");\n\n\t\tconst code = `${lines.join(\"\\n\")}\\n`;\n\n\t\tconst existingCode = fs.existsSync(registerFilePath) ? fs.readFileSync(registerFilePath, \"utf-8\") : \"\";\n\n\t\tif (code !== existingCode) {\n\t\t\tfs.writeFileSync(registerFilePath, code, \"utf-8\");\n\t\t}\n\t};\n\n\t/** 生成类型声明文件 */\n\tconst generateDts = (): void => {\n\t\tif (!dts || componentMap.size === 0) return;\n\n\t\tconst components = Array.from(componentMap.values()).sort((a, b) => a.name.localeCompare(b.name));\n\n\t\tconst dtsFullPath = path.resolve(config.root, dtsPath);\n\t\tconst dtsDir = path.dirname(dtsFullPath);\n\n\t\t// 生成类型声明内容\n\t\tconst lines: string[] = [];\n\t\tlines.push(\"// For this project development\");\n\t\tlines.push(\"// Auto-generated by fast component-auto-import\");\n\t\tlines.push(\"// Generated by fast-vite-plugins\");\n\t\tlines.push(\"// Do not edit this file manually\");\n\t\tlines.push(\"\");\n\t\tlines.push('import \"@vue/runtime-core\";');\n\t\tlines.push(\"\");\n\t\tlines.push(\"// GlobalComponents for Volar\");\n\t\tlines.push('declare module \"@vue/runtime-core\" {');\n\t\tlines.push(\"\texport interface GlobalComponents {\");\n\n\t\tcomponents.forEach(({ name, from }) => {\n\t\t\t// 计算相对路径\n\t\t\tlet relativePath = slash(path.relative(dtsDir, from));\n\n\t\t\t// 移除文件扩展名\n\t\t\trelativePath = relativePath.replace(/\\.(vue|tsx|jsx)$/, \"\");\n\n\t\t\t// 确保以 ./ 开头\n\t\t\tconst importPath = relativePath.startsWith(\".\") ? relativePath : `./${relativePath}`;\n\n\t\t\tlines.push(`\t\t${name}: (typeof import(\"${importPath}\"))[\"default\"];`);\n\t\t});\n\n\t\tlines.push(\"\t}\");\n\t\tlines.push(\"}\");\n\t\tlines.push(\"\");\n\t\tlines.push(\"export {};\");\n\n\t\tconst code = `${lines.join(\"\\n\")}\\n`;\n\n\t\t// 确保目录存在\n\t\tif (!fs.existsSync(dtsDir)) {\n\t\t\tfs.mkdirSync(dtsDir, { recursive: true });\n\t\t}\n\n\t\t// 只有内容变化时才写入\n\t\tconst existingCode = fs.existsSync(dtsFullPath) ? fs.readFileSync(dtsFullPath, \"utf-8\") : \"\";\n\n\t\tif (code !== existingCode) {\n\t\t\tfs.writeFileSync(dtsFullPath, code, \"utf-8\");\n\t\t}\n\t};\n\n\treturn {\n\t\tname: \"fast-vite-plugin-component-auto-import\",\n\t\tenforce: \"post\",\n\t\tconfigResolved: (resolvedConfig: ResolvedConfig): void | Promise<void> => {\n\t\t\t// 存储最终解析的配置\n\t\t\tconfig = resolvedConfig;\n\t\t},\n\t\tbuildStart(): void | Promise<void> {\n\t\t\tscanComponents();\n\t\t\tgenerateAutoRegister();\n\t\t\tgenerateDts();\n\t\t},\n\t\t// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n\t\tconfigureServer(server: ViteDevServer) {\n\t\t\tconst fullDir = path.resolve(config.root, dir);\n\n\t\t\t// 监听文件变化\n\t\t\tif (fs.existsSync(fullDir)) {\n\t\t\t\tserver.watcher.add(fullDir);\n\n\t\t\t\tconst handle = (file: string): void => {\n\t\t\t\t\tif (!file) return;\n\t\t\t\t\t// 忽略 .d.ts 文件\n\t\t\t\t\tif (file.endsWith(\".d.ts\")) return;\n\n\t\t\t\t\t// 检查是否是组件文件\n\t\t\t\t\tconst ext = path.extname(file).slice(1);\n\t\t\t\t\tif (!extensions.includes(ext)) return;\n\n\t\t\t\t\tscanComponents();\n\t\t\t\t\tgenerateAutoRegister();\n\t\t\t\t\tgenerateDts();\n\t\t\t\t};\n\n\t\t\t\tserver.watcher.on(\"add\", handle);\n\t\t\t\tserver.watcher.on(\"change\", handle);\n\t\t\t\tserver.watcher.on(\"unlink\", handle);\n\t\t\t}\n\t\t},\n\t};\n}\n\nexport { componentAutoImport };\n","import fs from \"fs\";\nimport path from \"path\";\nimport type { BuildRouterPathOptions } from \"./type\";\nimport type { Plugin, ResolvedConfig, ViteDevServer } from \"vite\";\n\n/**\n * Pascal Case 转换\n */\nfunction pascalCase(str: string): string {\n\treturn str.replace(/[-_](\\w)/g, (_, c) => (c ? c.toUpperCase() : \"\")).replace(/^\\w/, (c) => c.toUpperCase());\n}\n\n/**\n * 从文件内容中提取组件名称\n */\nfunction extractComponentName(fileContent: string): string | null {\n\t// 匹配 defineOptions({ name: 'xxx' })\n\tconst defineOptionsRegex = /defineOptions\\(\\s*\\{\\s*name:\\s*[\"']([^\"']+)[\"']/;\n\tconst defineOptionsMatch = fileContent.match(defineOptionsRegex);\n\treturn defineOptionsMatch ? defineOptionsMatch[1] : null;\n}\n\n/**\n * 路由路径生成\n * @param options 选项\n */\nfunction buildRouterPath(options: BuildRouterPathOptions = {}): Plugin {\n\tconst { dir = \"src/views\", exportPath = \"src/router/index.json\", deep = true, extensions = [\"vue\", \"tsx\", \"jsx\"], formatter } = options;\n\n\tlet config: ResolvedConfig;\n\n\t/** 递归获取目录下所有符合扩展名的文件*/\n\tconst getAllFiles = (dirPath: string, fileList: string[] = []): string[] => {\n\t\tif (!fs.existsSync(dirPath)) {\n\t\t\treturn fileList;\n\t\t}\n\n\t\tconst files = fs.readdirSync(dirPath);\n\t\tfiles.forEach((file) => {\n\t\t\tconst filePath = path.join(dirPath, file);\n\t\t\tconst stat = fs.statSync(filePath);\n\n\t\t\tif (stat.isDirectory()) {\n\t\t\t\tif (deep) {\n\t\t\t\t\tgetAllFiles(filePath, fileList);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst ext = path.extname(filePath).slice(1);\n\t\t\t\tif (extensions.includes(ext)) {\n\t\t\t\t\tfileList.push(filePath);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn fileList;\n\t};\n\n\t/** 生成路径-名称映射 */\n\tconst generatePathNameMap = (): void => {\n\t\tconst targetDir = path.resolve(config.root, dir);\n\t\tconst files = getAllFiles(targetDir);\n\n\t\tconst pathNameMap: Record<string, string> = files.reduce((acc, filePath) => {\n\t\t\ttry {\n\t\t\t\tconst content = fs.readFileSync(filePath, \"utf-8\");\n\t\t\t\tconst componentName = extractComponentName(content);\n\n\t\t\t\t// 生成相对路径\n\t\t\t\tconst relativePath = `/${path.relative(config.root, filePath).replace(/\\\\/g, \"/\")}`;\n\n\t\t\t\t// 确定最终的组件名称\n\t\t\t\tlet finalName: string;\n\t\t\t\tif (componentName) {\n\t\t\t\t\tfinalName = componentName;\n\t\t\t\t} else {\n\t\t\t\t\tconst fileName = path.basename(filePath, path.extname(filePath));\n\t\t\t\t\tfinalName = formatter ? formatter(fileName) : pascalCase(fileName);\n\t\t\t\t}\n\n\t\t\t\tacc[relativePath] = finalName;\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(`Error processing file ${filePath}:`, error);\n\t\t\t}\n\t\t\treturn acc;\n\t\t}, {});\n\n\t\t// 写入 JSON 文件\n\t\tconst outputPath = path.resolve(config.root, exportPath);\n\t\tconst outputDir = path.dirname(outputPath);\n\n\t\t// 确保输出目录存在\n\t\tif (!fs.existsSync(outputDir)) {\n\t\t\tfs.mkdirSync(outputDir, { recursive: true });\n\t\t}\n\n\t\tconst outputContent = JSON.stringify(pathNameMap, null, 2);\n\t\tfs.writeFileSync(outputPath, outputContent, \"utf-8\");\n\t};\n\n\treturn {\n\t\tname: \"fast-vite-plugin-router-path\",\n\t\tenforce: \"post\",\n\t\tconfigResolved: (resolvedConfig: ResolvedConfig): void | Promise<void> => {\n\t\t\t// 存储最终解析的配置\n\t\t\tconfig = resolvedConfig;\n\t\t},\n\t\tbuildStart(): void | Promise<void> {\n\t\t\tgeneratePathNameMap();\n\t\t},\n\t\t// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n\t\tconfigureServer(server: ViteDevServer) {\n\t\t\tconst fullDir = path.resolve(config.root, dir);\n\n\t\t\t// 监听文件变化\n\t\t\tif (fs.existsSync(fullDir)) {\n\t\t\t\tserver.watcher.add(fullDir);\n\n\t\t\t\tconst handle = (file: string): void => {\n\t\t\t\t\tif (!file) return;\n\t\t\t\t\t// 忽略 . d.ts 文件和 JSON 文件\n\t\t\t\t\tif (file.endsWith(\".d.ts\") || file.endsWith(\".json\")) return;\n\n\t\t\t\t\t// 检查是否是组件文件\n\t\t\t\t\tconst ext = path.extname(file).slice(1);\n\t\t\t\t\tif (!extensions.includes(ext)) return;\n\n\t\t\t\t\tgeneratePathNameMap();\n\t\t\t\t};\n\n\t\t\t\tserver.watcher.on(\"add\", handle);\n\t\t\t\tserver.watcher.on(\"change\", handle);\n\t\t\t\tserver.watcher.on(\"unlink\", handle);\n\t\t\t}\n\t\t},\n\t};\n}\n\nexport { buildRouterPath };\n","import fs from \"fs\";\nimport path from \"path\";\nimport type { Plugin, ResolvedConfig } from \"vite\";\n\nfunction padZero(num: number, length = 2): string {\n\treturn num.toString().padStart(length, \"0\");\n}\n\nfunction formatDate(date: Date): string {\n\tconst year = date.getUTCFullYear();\n\tconst month = padZero(date.getUTCMonth() + 1);\n\tconst day = padZero(date.getUTCDate());\n\tconst hours = padZero(date.getUTCHours());\n\tconst minutes = padZero(date.getUTCMinutes());\n\tconst seconds = padZero(date.getUTCSeconds());\n\tconst milliseconds = padZero(date.getUTCMilliseconds(), 3);\n\n\treturn `Z ${year}-${month}-${day} ${hours}:${minutes}:${seconds}.${milliseconds}`;\n}\n\n/**\n * 版本更新插件\n * @param version 不要携带 'v'，示例：1.0.0\n * @returns\n */\nfunction versionUpdatePlugin(version: string): Plugin {\n\tlet config: ResolvedConfig;\n\n\treturn {\n\t\tname: \"fast-vite-plugin-version-update\",\n\t\tconfigResolved: (resolvedConfig: ResolvedConfig): void | Promise<void> => {\n\t\t\t// 存储最终解析的配置\n\t\t\tconfig = resolvedConfig;\n\t\t},\n\t\tbuildStart(): void | Promise<void> {\n\t\t\tconst curDate = new Date();\n\n\t\t\tconst dateTime = formatDate(curDate);\n\n\t\t\tconst versionDir = config.publicDir;\n\t\t\tconst versionPath = path.join(versionDir, \"version.json\");\n\t\t\tif (!fs.existsSync(versionDir)) {\n\t\t\t\tfs.mkdirSync(versionDir);\n\t\t\t}\n\n\t\t\t// 写入版本信息文件\n\t\t\tconst content = JSON.stringify({ version: `v${version}`, dateTime }, null, 4);\n\t\t\tfs.writeFileSync(versionPath, content);\n\n\t\t\tconst pkgPath = path.join(config.base, \"package.json\");\n\t\t\tif (fs.existsSync(pkgPath)) {\n\t\t\t\tconst pkgJson = JSON.parse(fs.readFileSync(pkgPath, \"utf-8\"));\n\t\t\t\tpkgJson.version = version;\n\t\t\t\tfs.writeFileSync(pkgPath, JSON.stringify(pkgJson, null, 2), \"utf-8\");\n\t\t\t}\n\t\t},\n\t};\n}\n\nexport { versionUpdatePlugin };\n"],"mappings":"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","names":["index_exports","__export","buildRouterPath","buildSvgIcon","cdnImport","cdnJsDelivrUrl","cdnUnpkgUrl","componentAutoImport","findSvgFile","versionUpdatePlugin","writeTSXIcon","__toCommonJS","import_fs","import_path","findSvgFile","dir","svgContents","fs","file","path","iconName","svgContent","match","attr","viewBoxMatch","widthMatch","heightMatch","width","height","viewBoxContent","a","b","writeTSXIcon","componentName","iconDir","componentContent","line","buildSvgIcon","writeDir","config","rebuild","svgFiles","iconsPath","iconImportContent","iconTypeContent","exportContent","svg","idx","resolvedConfig","server","fullDir","handle","import_fs","import_path","import_rollup_plugin_external_globals","import_vite_plugin_externals","isDev","getModuleVersion","name","pwd","pkgFile","path","fs","isFullPath","renderUrl","url","data","getModuleInfo","module","prodUrl","v","version","pathList","p","css","cssList","c","cdnJsDelivrUrl","cdnUnpkgUrl","cdnImport","options","modules","enableInDevMode","generateCssLinkTag","generateScriptTag","isBuild","externalMap","alias","plugins","_","command","userConfig","externalGlobals","html","descriptors","cusomize","attrs","import_fs","import_path","slash","path","pascalCase","str","_","c","componentAutoImport","options","dir","exportPath","dts","dtsPath","deep","extensions","formatter","config","componentMap","getNameFromPath","filePath","name","ext","parts","scanDirectory","dirPath","depth","files","fs","entries","entry","fullPath","scanComponents","fullDir","absolutePath","relativePath","componentName","generateAutoRegister","components","a","b","registerFilePath","componentDir","lines","from","importPath","code","existingCode","generateDts","dtsFullPath","dtsDir","resolvedConfig","server","handle","file","import_fs","import_path","pascalCase","str","_","c","extractComponentName","fileContent","defineOptionsRegex","defineOptionsMatch","buildRouterPath","options","dir","exportPath","deep","extensions","formatter","config","getAllFiles","dirPath","fileList","fs","file","filePath","path","ext","generatePathNameMap","targetDir","pathNameMap","acc","content","componentName","relativePath","finalName","fileName","error","outputPath","outputDir","outputContent","resolvedConfig","server","fullDir","handle","import_fs","import_path","padZero","num","length","formatDate","date","year","month","day","hours","minutes","seconds","milliseconds","versionUpdatePlugin","version","config","resolvedConfig","dateTime","versionDir","versionPath","path","fs","content","pkgPath","pkgJson"]}